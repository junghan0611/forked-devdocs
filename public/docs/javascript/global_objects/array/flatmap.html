<header><h1>Array.prototype.flatMap()</h1></header><div class="section-content">
<div class="notecard experimental" id="sect1"><p><strong>Experimental:</strong> <strong>This is an <a href="https://developer.mozilla.org/en-US/docs/MDN/Writing_guidelines/Experimental_deprecated_obsolete#experimental">experimental technology</a></strong><br>Check the <a href="#browser_compatibility">Browser compatibility table</a> carefully before using this in production.</p></div> <p><code>flatMap()</code> 메서드는 먼저 매핑함수를 사용해 각 엘리먼트에 대해 map 수행 후, 결과를 새로운 배열로 평탄화합니다. 이는 깊이 1의 <a href="flat">flat</a> 이 뒤따르는 <a href="map">map</a> 과 동일하지만, <code>flatMap</code> 은 아주 유용하며 둘을 하나의 메소드로 병합할 때 조금 더 효율적입니다.</p>
</div>
<section aria-labelledby="구문"><h2 id="구문">구문</h2>
<div class="section-content"><div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="zQbXqiGpF01GpQOuCtfnOuO9GHyX7VwbvN9DFt4nn+A=" data-language="js">    arr<span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span><span class="token function">callback</span><span class="token punctuation">(</span>currentValue<span class="token punctuation">[</span><span class="token punctuation">,</span> index<span class="token punctuation">[</span><span class="token punctuation">,</span> array<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">,</span> thisArg<span class="token punctuation">]</span><span class="token punctuation">)</span>
</pre>
</div></div></section><section aria-labelledby="매개변수"><h3 id="매개변수">매개변수</h3>
<div class="section-content"><dl> <dt id="callback"><code>callback</code></dt> <dd> <p>새로운 배열의 엘리먼트를 생성하는 함수. 3개의 아규먼트를 갖습니다.</p> <dl> <dt id="currentvalue"><code>currentValue</code></dt> <dd> <p>배열에서 처리되는 현재 엘리먼트.</p> </dd> <dt id="index">
<code>index</code><span class="badge inline optional">Optional</span>
</dt> <dd> <p>배열에서 처리되고 있는 현재 엘리먼트의 인덱스.</p> </dd> <dt id="array">
<code>array</code><span class="badge inline optional">Optional</span>
</dt> <dd> <p><code>map</code> 이 호출된 배열.</p> </dd> </dl> </dd> <dt id="thisarg">
<code>thisArg</code><span class="badge inline optional">Optional</span>
</dt> <dd> <p><code>callback</code> 실행에서 <code>this</code> 로 사용할 값.</p> </dd> </dl></div></section><section aria-labelledby="반환_값"><h3 id="반환_값">반환 값</h3>
<div class="section-content"><p>각 엘리먼트가 callback 함수의 결과이고, 깊이 1로 평탄화된 새로운 배열.</p></div></section><section aria-labelledby="설명"><h2 id="설명">설명</h2>
<div class="section-content"><p>callback 함수의 상세 설명은 <a href="map"><code>Array.prototype.map()</code></a> 문서를 보시기 바랍니다. <code>flatMap</code> 메소드는 깊이 1의 <a href="flat"><code>flat</code></a> 이 뒤따르는 <a href="map"><code>map</code></a> 과 동일합니다.</p></div></section><section aria-labelledby="예제"><h2 id="예제">예제</h2>
</section><section aria-labelledby="map_과_flatmap"><h3 id="map_과_flatmap">
<code>map</code> 과 <code>flatMap</code>
</h3>
<div class="section-content">
<div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="SECkGc7r/fUBqhkmK61iRdMeU9IMKKJ2/t3xg1R5Hes=" data-language="js"><span class="token keyword">let</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

arr1<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">x</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>x <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// [[2], [4], [6], [8]]</span>

arr1<span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span><span class="token parameter">x</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>x <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// [2, 4, 6, 8]</span>

<span class="token comment">// 한 레벨만 평탄화됨</span>
arr1<span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span><span class="token parameter">x</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>x <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// [[2], [4], [6], [8]]</span>
</pre>
</div> <p>위 코드는 map 자체만을 사용해서 구현할 수 있지만, 다음은 <code>flatMap</code> 의 유즈케이스를 더 잘 보여주는 예시입니다.</p> <p>문장의 리스트로부터 단어의 리스트를 생성해봅시다.</p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="WCak2H0lV/znwZjhIgX9Kls02w0DqyjQxqs/Adz36Tc=" data-language="js"><span class="token keyword">let</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"it's Sunny in"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">,</span> <span class="token string">"California"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

arr1<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token operator">=&gt;</span>x<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// [["it's","Sunny","in"],[""],["California"]]</span>

arr1<span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span><span class="token parameter">x</span> <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ["it's","Sunny","in","","California"]</span>
</pre>
</div> <p>출력 리스트의 길이는 입력 리스트의 길이와 다를 수 있습니다.</p>
</div></section><section aria-labelledby="flatmap_을_이용한_아이템_추가_및_제거"><h3 id="flatmap_을_이용한_아이템_추가_및_제거">
<code>flatMap()</code> 을 이용한 아이템 추가 및 제거</h3>
<div class="section-content">
<p><code>flatMap</code>은 <code>map</code>을 하는 과정에서 아이템을 추가하거나 제거하여 아이템 개수를 바꿀 수 있습니다. 다른 말로는 각각의 아이템에 대하여 1:1대응관계 뿐만 아니라 다대다 대응도 가능하다는 것입니다. 이러한 측면에서 <a href="filter">filter</a>가 하는 역할의 반대역할을 한다고 볼 수 있습니다. 단순히 아무런 변화를 주고 싶지 않을때에는 원소 하나를 가진 배열을 반환할 수도, 아이템을 추가하고 싶을 때는 다-원소 배열을 반환할 수도, 아이템을 제거하고 싶을 때에는 빈 배열을 반환할 수도 있습니다.</p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="/vj4PkgZXXdHKPq7EvYve0iwTgJk/gNMvFAZ7JDMliY=" data-language="js">    <span class="token comment">// 다음은 음수는 제거하고 홀수는 1과 짝수로 분리하는 예시입니다.</span>
    <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">17</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">33</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">]</span>
    <span class="token comment">//       |\  \  x   |  | \   x   x   |</span>
    <span class="token comment">//      [4,1, 4,   20, 16, 1,       18]</span>

    a<span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
      <span class="token punctuation">(</span>n <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">?</span>      <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">:</span>
      <span class="token punctuation">(</span>n <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">:</span>
                     <span class="token punctuation">[</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span>
    <span class="token punctuation">)</span>

    <span class="token comment">// expected output: [4, 1, 4, 20, 16, 1, 18]</span>
    <span class="token comment">//=&gt; [1, 2, 3, 4, 5, 6, 7, 8, 9]</span>
</pre>
</div>
</div></section><section aria-labelledby="대안"><h2 id="대안">대안</h2>
</section><section aria-labelledby="reduce_와_concat"><h3 id="reduce_와_concat">
<code>reduce</code> 와 <code>concat</code>
</h3>
<div class="section-content"><div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="/ay6RSfVygAwSsdyoRQFn01dswWGi/sGAXxTGgUMycg=" data-language="js"><span class="token keyword">var</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

arr1<span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span><span class="token parameter">x</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span>x <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 다음과 동일합니다</span>
arr1<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">acc<span class="token punctuation">,</span> x</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> acc<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">[</span>x <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// [2, 4, 6, 8]</span>
<span class="token comment">//=&gt; [1, 2, 3, 4, 5, 6, 7, 8, 9]</span>
</pre>
</div></div></section><h2 id="명세">명세</h2>
<div class="_table"><table class="standard-table">
<thead><tr><th scope="col">Specification</th></tr></thead>
<tbody><tr><td><a href="https://tc39.es/ecma262/multipage/indexed-collections.html#sec-array.prototype.flatmap">ECMAScript Language Specification <br><small># sec-array.prototype.flatmap</small></a></td></tr></tbody>
</table></div>
<h2 id="브라우저_호환성">브라우저 호환성</h2>
<p>BCD tables only load in the browser<noscript> with JavaScript enabled. Enable JavaScript to view data.</noscript></p>
<section aria-labelledby="같이_보기"><h2 id="같이_보기">같이 보기</h2>
<div class="section-content"><ul> <li><a href="flat"><code>Array.prototype.flat()</code></a></li> <li><a href="map"><code>Array.prototype.map()</code></a></li> <li><a href="reduce"><code>Array.prototype.reduce()</code></a></li> <li><a href="concat"><code>Array.prototype.concat()</code></a></li> </ul></div></section><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2023 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Array/flatMap" class="_attribution-link">https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Array/flatMap</a>
  </p>
</div>
