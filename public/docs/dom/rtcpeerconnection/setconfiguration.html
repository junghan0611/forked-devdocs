<header><h1>RTCPeerConnection.setConfiguration()</h1></header><div class="section-content">
<div class="notecard experimental" id="sect1"><p><strong>Experimental:</strong> <strong>This is an <a href="https://developer.mozilla.org/en-US/docs/MDN/Writing_guidelines/Experimental_deprecated_obsolete#experimental">experimental technology</a></strong><br>Check the <a href="#browser_compatibility">Browser compatibility table</a> carefully before using this in production.</p></div> <p><code>RTCPeerConnection.setConfiguration()</code> 메소드는 <a href="rtcpeerconnection"><code>RTCConfiguration</code></a>객체에 명시한 값을 가지고 <a href="../rtcpeerconnection"><code>RTCPeerConnection</code></a>의 현재 설정을 지정합니다. 이 메소드를 사용해서 연결에서 사용되는 ICE 서버와 전송 정책을 변경 할 수 있습니다.</p> <p>가장 보편적으로 쓰이는 방법은 사용하려는 ICE 서버 값으로 교체해주는것 입니다. (엄청 자주 사용되는 케이스는 아닐 것입니다) 이 방법을 수행하는 두 가지 시나리오는 아래와 같습니다:</p> <ul> <li>
<a href="../rtcpeerconnection"><code>RTCPeerConnection</code></a>가 ICE 서버를 명시하지 않고 시작된 경우. 예를 들어, <a href="rtcpeerconnection"><code>RTCPeerConnection()</code></a> 생성자를 매개변수 없이 호출하게되면, 개발자가 직접 <code>setConfiguration()</code>를 호출해서 ICE 협상 시작 전에 ICE 서버를 추가해줘야 합니다.</li> <li>연결의 재협상이 필요하거나, 어떤 이유로 인해서 다른 종류의 ICE 서버를 사용해야하는 경우. 예를 들어, 사용자가 새로운 지역으로 이동을 했기 때문에 지역 ICE 서버를 바꿔야하는 경우입니다. 이런 경우에는, <code>setConfiguration()</code>를 호출해서 신규 지역 ICE 서버로 바꿔주고, <a href="https://developer.mozilla.org/en-US/docs/Web/API/WebRTC_API/Session_lifetime" class="only-in-en-us">ICE restart <small>(en-US)</small></a>을 시작하게됩니다.</li> </ul> <div class="notecard note" id="sect2"> <p><strong>참고:</strong> 연결이 이미 설정이 되어있다면, 식별 정보는 변경 할 수 없습니다.</p> </div>
</div>
<h2 id="syntax">Syntax</h2>
<div class="section-content"><div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="wZPzGxoOECpI69TlITTb/QMX2EAn1XrZMyRsjVv7ie4=" data-language="js">RTCPeerConnection<span class="token punctuation">.</span><span class="token function">setConfiguration</span><span class="token punctuation">(</span>configuration<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</div></div>
<h3 id="매개변수">매개변수</h3>
<div class="section-content"><dl> <dt id="configuration"><code>configuration</code></dt> <dd> <p>설정을 할 수 있는 옵션들을 제공해주는 <a href="rtcpeerconnection"><code>RTCConfiguration</code></a> 객체입니다. 변경사항은 계속해서 추가되지 않습니다. 대신에, 신규 값이 기존의 값은 완전히 대체하게 됩니다.</p> </dd> </dl></div>
<h3 id="예외처리">예외처리</h3>
<div class="section-content"><dl> <dt id="invalidaccesserror"><code>InvalidAccessError</code></dt> <dd> <p><code>configuration.iceServers</code>에 정의한 하나 혹은 여러개의 URL이 <a class="only-in-en-us" href="https://developer.mozilla.org/en-US/docs/Glossary/TURN">TURN <small>(en-US)</small></a> 서버 입니다. 하지만, 로그인을 위한 정보가 완전히 제공되지 않아서 발생하는 에러입니 (<a class="only-in-en-us" href="https://developer.mozilla.org/en-US/docs/Web/API/RTCIceServer/username"><code>RTCIceServer.username</code> <small>(en-US)</small></a> 혹은 <a class="page-not-created"><code>RTCIceServer.credentials</code></a>의 값이 없다는 뜻). 이로인해 서버에 로그인을 성공적으로 할 수 없게 됩니다.</p> </dd> <dt id="invalidmodificationerror"><code>InvalidModificationError</code></dt> <dd> <p><code>configuration</code>에서 변경되는 식별 정보를 포함하고 있지만, 연결을 구성하면서 이미 식별 정보를 지정했기 때문에 발생하는 에러입니다. 이 에러는 <code>configuration.peerIdentity</code> 혹은 <code>configuration.certificates</code>가 설정이 되어있고, 이 값들이 현재 설정 값과 다르기 때문에 발생합니다.</p> </dd> <dt id="invalidstateerror"><code>InvalidStateError</code></dt> <dd> <p><a href="../rtcpeerconnection"><code>RTCPeerConnection</code></a>이 닫혀있어서 발생하는 에러입니다.</p> </dd> <dt id="syntaxerror"><code>SyntaxError</code></dt> <dd> <p><code>configuration.iceServers</code>에 제공된 하나 혹은 여러개의 URL 리스트가 유효하지 않아서 발생하는 에러입니다.</p> </dd> </dl></div>
<h2 id="예시">예시</h2>
<div class="section-content">
<p>아래의 예시에서는 ICE 재시작이 필요한 것을 확인하고, 다른 ICE 서버를 사용해서 협상이 이루어지도록 합니다.</p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="umIY2SitD33ZXw84VCw7EMO2xVNpC2wqTdpEufd4XGQ=" data-language="js"><span class="token keyword">var</span> restartConfig <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">iceServers</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
                          <span class="token literal-property property">urls</span><span class="token operator">:</span> <span class="token string">"turn:asia.myturnserver.net"</span><span class="token punctuation">,</span>
                          <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token string">"allie@oopcode.com"</span><span class="token punctuation">,</span>
                          <span class="token literal-property property">credential</span><span class="token operator">:</span> <span class="token string">"topsecretpassword"</span>
                      <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

myPeerConnection<span class="token punctuation">.</span><span class="token function">setConfiguration</span><span class="token punctuation">(</span>restartConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>

myPeerConnection<span class="token punctuation">.</span><span class="token function">createOffer</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string-property property">"iceRestart"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">offer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> myPeerConnection<span class="token punctuation">.</span><span class="token function">setLocalDescription</span><span class="token punctuation">(</span>offer<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// send the offer to the other peer using the signaling server</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>reportError<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</div> <p>먼저, 신규 <a href="rtcpeerconnection"><code>RTCConfiguration</code></a>가 신규 ICE 서버와 인증 정보를 명시한 <code>restartConfig</code>를 가지도록 생성됩니다. 그리고 설정한 <a href="rtcpeerconnection"><code>RTCConfiguration</code></a>가 <code>setConfiguration()</code>에 전달됩니다. <code>iceRestart</code> 옵션의 값을 <code>true</code>로 지정하고, <a class="only-in-en-us" href="https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection/createOffer"><code>createOffer()</code> <small>(en-US)</small></a>을 호출해서 ICE 협상이 재시작됩니다. 이후에, 반환받은 offer를 local description으로 설정하고, 다른 피어에게 offer를 전달하는 것과 같이 일반적으로 진행되도록 처리합니다.</p>
</div>
<h2 id="명세서">명세서</h2>
<div class="_table"><table class="standard-table">
<thead><tr><th scope="col">Specification</th></tr></thead>
<tbody><tr><td><a href="https://w3c.github.io/webrtc-pc/#dom-rtcpeerconnection-setconfiguration">WebRTC: Real-Time Communication in Browsers <br><small># dom-rtcpeerconnection-setconfiguration</small></a></td></tr></tbody>
</table></div>
<h2 id="브라우저_호환성">브라우저 호환성</h2>
<p>BCD tables only load in the browser<noscript> with JavaScript enabled. Enable JavaScript to view data.</noscript></p>
<h2 id="참조">참조</h2>
<div class="section-content"><ul> <li><a href="getconfiguration"><code>RTCPeerConnection.getConfiguration()</code></a></li> <li><a href="rtcpeerconnection"><code>RTCConfiguration</code></a></li> <li><a href="../rtcpeerconnection"><code>RTCPeerConnection</code></a></li> </ul></div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2023 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/ko/docs/Web/API/RTCPeerConnection/setConfiguration" class="_attribution-link">https://developer.mozilla.org/ko/docs/Web/API/RTCPeerConnection/setConfiguration</a>
  </p>
</div>
