<header><h1>RTCPeerConnection.createDataChannel()</h1></header><div class="section-content">
<p><a href="../rtcpeerconnection"><code>RTCPeerConnection</code></a> 인터페이스의 <code>createDataChannel()</code> 메소드는 어떤 형식의 데이터든 송신 할 수 있도록 원격 유저와 연결하는 신규 채널을 생성합니다.이 방법은 이미지, 파일 전송, 문자 채팅, 게임 패킷 업데이트 등과 같은 백채널 컨텐츠에 유용하게 사용 가능합니다.</p> <p>연결 인터페이스에 신규 채널이 처음 추가되면, 재협상 과정이 <code><a href="https://developer.mozilla.org/ko/docs/Web/Reference/Events/negotiationneeded" class="page-not-created">negotiationneeded</a></code> 이벤트를 전달하여 시작됩니다.</p>
</div>
<h2 id="syntax">Syntax</h2>
<div class="section-content"><div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="/1evXq65L+ClvAGUGakYFk5R4PT3IQ/DB0T6YNQYQGg=" data-language="js">dataChannel <span class="token operator">=</span> RTCPeerConnection<span class="token punctuation">.</span><span class="token function">createDataChannel</span><span class="token punctuation">(</span>label<span class="token punctuation">[</span><span class="token punctuation">,</span> options<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</div></div>
<h3 id="매개변수">매개변수</h3>
<div class="section-content"><dl> <dt id="label"><code>label</code></dt> <dd> <p>사람이 읽을 수 있는 채널 이름입니다. 이름의 문자열은 65,535 바이트 보다 작아야합니다.</p> </dd> <dt id="options">
<code>options</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p><a href="#rtcdatachannelinit_dictionary"><code>RTCDataChannelInit</code> dictionary</a>가 데이터 채널에 대한 설정 옵션들을 제공합니다.</p> </dd> </dl></div>
<h3 id="rtcdatachannelinit_딕셔너리">RTCDataChannelInit 딕셔너리</h3>
<div class="section-content">
<p><code>RTCDataChannelInit</code> 딕셔너리는 개발자의 필요에 따라 데이터 채널을 설정 할 때 객체로 전달되는 옵션 매개변수로 전달되는 객체에 포함 될 수 있는 다음의 필드들을 제공합니다:</p> <dl> <dt id="ordered">
<code>ordered</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>이 옵션은 <a class="only-in-en-us" href="https://developer.mozilla.org/en-US/docs/Web/API/RTCDataChannel"><code>RTCDataChannel</code> <small>(en-US)</small></a>에 전달된 메세지가 보내진 순서대로 상대방에게 도착해야하는지 (<code>true</code>) 아니면 순서가 달라도 허용 (<code>false</code>)이 되는지를 결정합니다. <code>true</code></p> </dd> <dt id="maxpacketlifetime_optional"><strong><code>maxPacketLifeTime</code> <span class="badge inline optional">Optional</span></strong></dt> <dd> <p>불안정한 모드에서 메세지를 전송 할 때 최대 몇 초 동안 전송을 시도 할 것인지를 결정하는 옵션입니다. 이 값은 16bit의 부호가 없는 정수형이지만, 각 유저 에이전트는 적절하다고 판단되는 최대 값으로 지정 할 수 있습니다. (<strong>주의</strong>: <code>maxPacketLifeTime</code> 혹은 <code>maxRetransmits</code> 옵션 둘 중 하나만 사용해야함.) <code>null</code></p> </dd> <dt id="maxretransmits">
<code>maxRetransmits</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>불안정한 모드에서 메세지 전송이 실패하면 최대 몇 번을 재시도 할 것인지를 결정하는 옵션입니다. 이 값은 16bit의 부호가 없는 정수형이지만, 각 유저 에이전트는 적절하다고 판단되는 최대 값으로 지정 할 수 있습니다. (<strong>주의</strong>: <code>maxPacketLifeTime</code> 혹은 <code>maxRetransmits</code> 옵션 둘 중 하나만 사용해야함.) <code>null</code></p> </dd> <dt id="protocol">
<code>protocol</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p><a class="only-in-en-us" href="https://developer.mozilla.org/en-US/docs/Web/API/RTCDataChannel"><code>RTCDataChannel</code> <small>(en-US)</small></a>에 사용되는 서브 프로토콜의 이름입니다. 존재하지 않으면 이 옵션은 빈 문자열 (<code>""</code>)입니다. <code>""</code> 이 문자열은 65,535 바이트 보다 작아야합니다.</p> </dd> <dt id="negotiated">
<code>negotiated</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>기본 값일 경우 (<code>false</code>), 데이터채널은 밴드의 대역 내에서 협상됩니다. 이 때, 한 쪽은 <code>createDataChannel</code>를 호출하고, 다른 쪽에서는 <a href="../rtcdatachannelevent"><code>RTCDataChannelEvent</code></a> 이벤트를 <code>ondatachannel</code> <code>EventHandler</code>를 사용해서 감청합니다. 반대로 <code>true</code> 일 경우, 밴드의 대역 범위를 벗어나도 재협상이 가능해집니다. 이 때에는 양쪽에서 합의된 id를 가진 <code>createDataChannel</code>을 호출하게됩니다. <code>false</code></p> </dd> <dt id="id">
<code>id</code> <span class="badge inline optional">Optional</span>
</dt> <dd> <p>채널에 대한 16bit 숫자형 ID입니다. 허용되는 값은 0에서 65534 사이입니다. 이 값을 지정하지 않으면, 유저 에이전트가 알아서 ID를 지정해줍니다.</p> </dd> </dl> <div class="notecard note" id="sect1"> <p><strong>참고:</strong> <code>RTCDataChannelInit</code> 딕셔너리를 사용해서 설정이 가능한 옵션들은 <a class="only-in-en-us" href="https://developer.mozilla.org/en-US/docs/Web/API/RTCDataChannel"><code>RTCDataChannel</code> <small>(en-US)</small></a> 인터페이스에서 설정이 가능한 특성들의 서브 셋을 뜻합니다.</p> </div>
</div>
<h3 id="반환_값">반환 값</h3>
<div class="section-content"><p>지정한 <code>label</code>을 가지고, <code>options</code>에 지정한 옵션들을 사용하여 설정된 신규 <a class="only-in-en-us" href="https://developer.mozilla.org/en-US/docs/Web/API/RTCDataChannel"><code>RTCDataChannel</code> <small>(en-US)</small></a> 객체입니다. 각 매개변수들을 지정하지 않으면, 기본 값으로 설정되어 생성됩니다.</p></div>
<h3 id="예외처리">예외처리</h3>
<div class="section-content"><dl> <dt id="invalidstateerror"><code>InvalidStateError</code></dt> <dd> <p><a href="../rtcpeerconnection"><code>RTCPeerConnection</code></a>가 닫혀있음을 뜻합니다.</p> </dd> <dt id="typeerror"><code>TypeError</code></dt> <dd> <p>이 에러는 여러 상황에서 발생이 가능합니다:* label 혹은 프로토콜 문자열이 너무 길어서 발생합니다. 해당 문자열은 65,535바이트보다 작아야합니다.</p> <ul> <li>
<code>id</code>가 65535여서 발생합니다. 이 값은 유효한 부호가 없는 16bit 이지만, <code>id</code> 값으로 허용되는 범위를 벗어나게됩니다. (0-65534 까지만 허용)</li> </ul> </dd> <dt id="syntaxerror"><code>SyntaxError</code></dt> <dd> <p><code>maxPacketLifeTime</code> 와 <code>maxRetransmits</code> 옵션에 모두 값이 지정되면 발생합니다. 둘 중 하나에만 non-<code>null</code> 값을 지정해야 합니다.</p> </dd> <dt id="resourceinuse"><code>ResourceInUse</code></dt> <dd> <p><code>id</code> 값이 지정되었지만, 다른 <a class="only-in-en-us" href="https://developer.mozilla.org/en-US/docs/Web/API/RTCDataChannel"><code>RTCDataChannel</code> <small>(en-US)</small></a>에서 이미 같은 이름을 사용 중이면 발생합니다.</p> </dd> <dt id="operationerror"><code>OperationError</code></dt> <dd> <p>지정한 <code>id</code>가 이미 사용 중이거나, <code>id</code>가 지정되지 않았다면 모든 ID들이 사용 중이기 때문에 WebRTC 레이어에서 자동으로 <code>id</code> 생성이 불가능 할 때 발생합니다.</p> </dd> </dl></div>
<h2 id="예시">예시</h2>
<div class="section-content">
<p>아래의 예제에서는 어떻게 데이터 채널을 생성하고, 생성 할 때 메세지를 전송하고 수신하는 이벤트인 <code><a href="https://developer.mozilla.org/ko/docs/Web/Reference/Events/open" class="page-not-created">open</a></code>와 <code><a href="https://developer.mozilla.org/ko/docs/Web/Reference/Events/message" class="page-not-created">message</a></code>에대한 핸들러를 설정합니다. (onnegotiationneeded는 이미 설정이 되었다고 가정하고 간소화한 예입니다.)</p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="JFWbuE/qhH3CVdL6StIYVqm0xpfcy3WN3OZiQz45aiM=" data-language="js"><span class="token comment">// Offerer side</span>

<span class="token keyword">var</span> pc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RTCPeerConnection</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> channel <span class="token operator">=</span> pc<span class="token punctuation">.</span><span class="token function">createDataChannel</span><span class="token punctuation">(</span><span class="token string">"chat"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
channel<span class="token punctuation">.</span><span class="token function-variable function">onopen</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  channel<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Hi you!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
channel<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre>
</div> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="FshLliIZGP5m8827dIcskzmXCojicxtYSN+x3IJsC60=" data-language="js"><span class="token comment">// Answerer side</span>

<span class="token keyword">var</span> pc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RTCPeerConnection</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>
pc<span class="token punctuation">.</span><span class="token function-variable function">ondatachannel</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> channel <span class="token operator">=</span> event<span class="token punctuation">.</span>channel<span class="token punctuation">;</span>
﻿  channel<span class="token punctuation">.</span><span class="token function-variable function">onopen</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    channel<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Hi back!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  channel<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre>
</div> <p>다른 방법으로는 양쪽에서 합의한 id를 사용하여 보다 대칭적인 대역 밴드 외 협상이 가능합니다. (id는 0입니다):</p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="FPCo5FVNV3l9Bcqt6U8gd3RPxQeFX+ydUim3e9c3Tq0=" data-language="js"><span class="token comment">// Both sides</span>

<span class="token keyword">var</span> pc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RTCPeerConnection</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> channel <span class="token operator">=</span> pc<span class="token punctuation">.</span><span class="token function">createDataChannel</span><span class="token punctuation">(</span><span class="token string">"chat"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">negotiated</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
channel<span class="token punctuation">.</span><span class="token function-variable function">onopen</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  channel<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'Hi!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
channel<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre>
</div> <p>연결 및 채널이 구성되는 예를 더 자세히 알고 싶다면, <a href="https://developer.mozilla.org/en-US/docs/Web/API/WebRTC_API/Simple_RTCDataChannel_sample" class="only-in-en-us">A simple RTCDataChannel sample <small>(en-US)</small></a>를 참조하십시오.</p>
</div>
<h2 id="명세">명세</h2>
<div class="_table"><table class="standard-table">
<thead><tr><th scope="col">Specification</th></tr></thead>
<tbody><tr><td><a href="https://w3c.github.io/webrtc-pc/#dom-peerconnection-createdatachannel">WebRTC: Real-Time Communication in Browsers <br><small># dom-peerconnection-createdatachannel</small></a></td></tr></tbody>
</table></div>
<h2 id="브라우저_호환성">브라우저 호환성</h2>
<p>BCD tables only load in the browser<noscript> with JavaScript enabled. Enable JavaScript to view data.</noscript></p>
<h2 id="참조">참조</h2>
<div class="section-content"><ul> <li><a class="only-in-en-us" href="https://developer.mozilla.org/en-US/docs/Web/API/RTCDataChannel"><code>RTCDataChannel</code> <small>(en-US)</small></a></li> <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/WebRTC_API/Simple_RTCDataChannel_sample" class="only-in-en-us">A simple RTCDataChannel sample <small>(en-US)</small></a></li> <li><a href="../rtcpeerconnection"><code>RTCPeerConnection</code></a></li> </ul></div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2023 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/ko/docs/Web/API/RTCPeerConnection/createDataChannel" class="_attribution-link">https://developer.mozilla.org/ko/docs/Web/API/RTCPeerConnection/createDataChannel</a>
  </p>
</div>
