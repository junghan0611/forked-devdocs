<header><h1>MutationObserver()</h1></header><div class="section-content">
<p><a href="../mutationobserver"><code>MutationObserver</code></a> 인터페이스의 <code>MutationObserver()</code> 생성자는 DOM에 변경이 발생할 때 지정한 콜백을 호출하는 감지기 인스턴스를 새로 생성하고 반환합니다.</p> <p>생성 시점에는 DOM 변경 감지가 시작하지 않습니다. 감지를 시작하려면 <a href="observe"><code>observe()</code></a> 메서드를 호출해 DOM의 어느 부분을 주시할 것인지와 어떤 변경을 감지할 것인지 설정해야 합니다.</p>
</div>
<h2 id="구문">구문</h2>
<div class="section-content"><div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="qLg/x1eMaJM2tJhbdnp2WmcZZOVEKrRVYvQaguGJ9L0=" data-language="js"><span class="token keyword">new</span> <span class="token class-name">MutationObserver</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span>
</pre>
</div></div>
<h3 id="매개변수">매개변수</h3>
<div class="section-content"><dl> <dt id="callback"><code>callback</code></dt> <dd> <p>주어진 노드 또는 하위 트리와 옵션을 만족하는 DOM 변경을 감지하면 호출할 콜백입니다.</p> <p><code>callback</code> 함수는 두 개의 매개변수를 받습니다.</p> <ol> <li>일어난 변경 각각을 나타내는 <a href="../mutationrecord"><code>MutationRecord</code></a> 객체들의 배열</li> <li>콜백을 호출한 <a href="../mutationobserver"><code>MutationObserver</code></a>
</li> </ol> <p>아래의 <a href="#%EC%98%88%EC%A0%9C">예제</a>에서 더 자세히 확인하세요.</p> </dd> </dl></div>
<h3 id="반환_값">반환 값</h3>
<div class="section-content"><p>DOM 변경이 발생하면 지정한 <code>callback</code>을 호출하는 <a href="../mutationobserver"><code>MutationObserver</code></a> 객체입니다.</p></div>
<h2 id="예제">예제</h2>
<div class="section-content"><p>이 예제는 노드와 그 자식들을 주시하여 요소가 트리에 추가되거나 트리에서 제거되는 경우, 그리고 요소의 특성이 변경되는 경우를 감지하는 새로운 <code>MutationObserver</code>를 생성합니다.</p></div>
<h3 id="콜백_함수">콜백 함수</h3>
<div class="section-content">
<div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="KGb8DenqPPZNXsqNNVeTAOS5qbJMqbfRwASjFHDMXLA=" data-language="js"><span class="token keyword">function</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token parameter">mutationList<span class="token punctuation">,</span> observer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  mutationList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">mutation</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>mutation<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> <span class="token string">"childList"</span><span class="token operator">:</span>
        <span class="token comment">/* 트리에 한 개 이상의 자식이 추가됐거나 제거된 경우.
           mutation.addedNodes와 mutation.removedNodes를 참고하세요. */</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token string">"attributes"</span><span class="token operator">:</span>
        <span class="token comment">/* mutation.target이 가리키는 요소의 특성이 바뀐 경우.
           특성의 이름은 mutation.attributeName으로 알 수 있고,
           이전 값은 mutation.oldValue로 알 수 있습니다. */</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre>
</div> <p><code>callback()</code> 함수는 감지기의 <a href="observe"><code>observe()</code></a>를 호출했을 때 지정한 설정을 만족하는 변경을 감지하면 호출됩니다.</p> <p>일어난 변경의 종류(자식 목록의 변경, 특성의 변경)는 <a class="only-in-en-us" href="https://developer.mozilla.org/en-US/docs/Web/API/MutationRecord/type"><code>mutation.type</code> <small>(en-US)</small></a> 속성을 통해 알 수 있습니다.</p>
</div>
<h3 id="감지기_생성과_시작">감지기 생성과 시작</h3>
<div class="section-content">
<p>실제로 감지 절차를 시작하는 코드는 다음과 같습니다.</p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="4+VO8amMi8vV3Nae4n7iHz4NIAeGPBS1uVyXw8NOdbI=" data-language="js"><span class="token keyword">const</span> targetNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#someElement"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> observerOptions <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">childList</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">attributes</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>

  <span class="token comment">// false를 지정하거나 아예 생략하여 부모 노드의 변경만 감지</span>
  <span class="token literal-property property">subtree</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> observer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MutationObserver</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
observer<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span>targetNode<span class="token punctuation">,</span> observerOptions<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</div> <p>주시하고자 하는 하위 트리는 <code>someElement</code>라는 ID를 가진 요소를 통해 탐색합니다. <code>observerOptions</code> 레코드에는 감지기의 옵션을 설정합니다. 자식의 변경과 특성의 변경을 모두 감지하고자 하므로 <code>childList</code>와 <code>attributes</code>를 모두 <code>true</code>로 지정합니다.</p> <p>그 다음에는 감지기 인스턴스를 생성하면서 <code>callback()</code> 함수를 지정하고, <code>target</code> 노드와 <code>options</code> 객체를 제공하여 <code>observe()</code>를 호출, 하위 트리의 변경 감지를 시작합니다.</p> <p>이후 <a href="disconnect"><code>disconnect()</code></a>를 호출하기 전까지는 DOM 트리의 <code>targetNode</code> 아래에서 새로운 요소가 추가되거나 제거되는 경우, 또는 <code>targetNode</code>까지 포함하여 요소 중 하나의 특성이 바뀌는 경우 <code>callback()</code>이 호출됩니다.</p>
</div>
<h2 id="명세서">명세서</h2>
<div class="_table"><table class="standard-table">
<thead><tr><th scope="col">Specification</th></tr></thead>
<tbody><tr><td><a href="#">DOM Standard <br><small># ref-for-dom-mutationobserver-mutationobserver①</small></a></td></tr></tbody>
</table></div>
<h2 id="브라우저_호환성">브라우저 호환성</h2>
<p>BCD tables only load in the browser<noscript> with JavaScript enabled. Enable JavaScript to view data.</noscript></p><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2023 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/ko/docs/Web/API/MutationObserver/MutationObserver" class="_attribution-link">https://developer.mozilla.org/ko/docs/Web/API/MutationObserver/MutationObserver</a>
  </p>
</div>
