<header><h1>AudioParam.setTargetAtTime()</h1></header><div class="section-content"><p><a href="../audioparam"><code>AudioParam</code></a> 인터페이스의 <code>setTargetAtTime()</code> 메서드는 <code>AudioParam</code> 값에 점진적인 변화의 시작을 예정합니다. 이 메서드는 ADSR 엔벨로프의 decay 혹은 release 부분에 유용합니다.</p></div>
<h2 id="구문">구문</h2>
<div class="section-content"><div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="krxlQSXwb098ZiN1xsSXbiT6xITjjnuq+fUVQVeV6yE=" data-language="js"><span class="token keyword">var</span> paramRef <span class="token operator">=</span> param<span class="token punctuation">.</span><span class="token function">setTargetAtTime</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> startTime<span class="token punctuation">,</span> timeConstant<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</div></div>
<h3 id="매개변수">매개변수</h3>
<div class="section-content"><dl> <dt id="target">target</dt> <dd> <p>주어진 시작 시간에 파라미터가 변화를 시작할 값.</p> </dd> <dt id="starttime">startTime</dt> <dd> <p><a class="only-in-en-us" href="https://developer.mozilla.org/en-US/docs/Web/API/BaseAudioContext/currentTime"><code>AudioContext.currentTime</code> <small>(en-US)</small></a>과 같은 시간 좌표계에서 지수적 변화가 시작될 시간. 만약 이 값이 <code>AudioContext.currentTime</code> 보다 작거나 같다면, 파라미터는 즉시 변화를 시작할 것입니다.</p> </dd> <dt id="timeconstant">timeConstant</dt> <dd> <p>target 값을 향한 지수적 접근의 시간 상수 값 (초 단위로 주어짐). 이 값이 클수록, 변화는 더 느려질 것입니다.</p> </dd> </dl></div>
<h3 id="반환">반환</h3>
<div class="section-content"><p>이 <code>AudioParam</code> 객체에 대한 참조. 이 인터페이스의 몇몇 오래된 브라우저 구현은 void를 반환합니다.</p></div>
<h2 id="설명">설명</h2>
<div class="section-content">
<p>변화는 <code>startTime</code> 에 명시된 시간에 시작해 <code>target</code> 매개변수에 의해 주어진 값을 향해 지수적으로 움직입니다. <code>timeConstant</code> 매개변수에 의해 정의된 감소율은 지수적입니다. 그러므로 값은 절대 <code>target</code> 에 완벽히 도달하지 못할 것이지만, <code>timeConstant</code> 길이의 각 시간 단계 이후에, 값은 또 다른 <math> <semantics> <mrow> <mn>1</mn> <mo>-</mo> <msup> <mi>e</mi> <mrow> <mo>-</mo> <mn>1</mn> </mrow> </msup> <mo>≈</mo> <mn>63.2</mn> <mtext>%</mtext> </mrow> <annotation encoding="TeX">1 - e^{-1} \대략 63.2%</annotation> </semantics> </math> 에 의해 <code>target</code> 에 다가가게 될 것입니다. (일차 선형 연속 시불변 시스템을 사용하는) 완전한 공식은 <a href="https://webaudio.github.io/web-audio-api/#dom-audioparam-settargetattime" target="_blank">Web Audio 명세서</a>에서 확인할 수 있습니다. </p> <p>만약 특정한 시간까지 target 값에 절대적으로 도달할 필요가 있다면, <a href="exponentialramptovalueattime"><code>AudioParam.exponentialRampToValueAtTime()</code></a>를 사용할 수 있습니다. 그러나, 수학적인 이유로, 이 메서드는 현재 값이나 target 값이 <code>0</code> 이면 작동하지 않습니다.</p>
</div>
<h3 id="좋은_timeconstant_고르기">좋은 <code>timeConstant</code> 고르기</h3>
<div class="section-content">
<p>위에서 언급되었다시피, 각 <code>timeConstant</code> 가 target 값을 향해 63.2% 만큼씩 움직이며, 값은 지수적으로 변화합니다. target 값에 도달하는 것에 대해 걱정할 필요가 없습니다. 한 번 충분히 가까워지고 나면, 듣는 사람은 추가적인 변화를 감지하지 못할 것입니다.</p> <p>사용하는 경우에 따라, target 값에 95% 만큼 도달하는 것은 충분할 것입니다. 그 경우, <code>timeConstant</code> 를 원하는 기간의 1/3만큼 설정할 수 있습니다.</p> <p>시간이 진행함에 따라 어떻게 값이 0%에서 100%로 변화하는지에 대해서는 아래의 표를 참고해 보세요.</p> <figure class="table-container"><div class="_table"><table> <thead> <tr> <th>
<code>startTime</code> 이후로의 시간</th> <th>값</th> </tr> </thead> <tbody> <tr> <td><code>0 * timeConstant</code></td> <td>0%</td> </tr> <tr> <td><code>0.5 * timeConstant</code></td> <td>39.3%</td> </tr> <tr> <td><code>1 * timeConstant</code></td> <td>63.2%</td> </tr> <tr> <td><code>2 * timeConstant</code></td> <td>86.5%</td> </tr> <tr> <td><code>3 * timeConstant</code></td> <td>95.0%</td> </tr> <tr> <td><code>4 * timeConstant</code></td> <td>98.2%</td> </tr> <tr> <td><code>5 * timeConstant</code></td> <td>99.3%</td> </tr> <tr> <td><code>n * timeConstant</code></td> <td> <math> <semantics> <mrow> <mn>1</mn> </mrow> </semantics> </math> </td> </tr> </tbody> </table></div></figure> <math> <semantics> <mrow> <mn>1</mn> <mo>-</mo> <msup> <mi>e</mi> <mrow> <mo>-</mo> <mi>n</mi> </mrow> </msup> </mrow> <annotation encoding="TeX">1 - e^{-n}</annotation> </semantics> </math>
</div>
<h2 id="예제">예제</h2>
<div class="section-content">
<p>이 예제에는 두 개의 제어 버튼을 가진 미디어 소스가 있습니다 (소스 코드는 <a href="https://github.com/mdn/webaudio-examples/blob/master/audio-param/index.html" target="_blank">webaudio-examples repo</a>에서 볼 수 있고, <a href="https://mdn.github.io/webaudio-examples/audio-param/" target="_blank">작동 예제</a>도 볼 수 있습니다). 이 버튼이 눌렸을 때, <code>setTargetAtTime()</code> 이 사용되어 각각 gain 값을 1.0까지, 그리고 0까지 서서히 사라지게(fade) 하는데, 이 이펙트는 1초 후에 시작되고 이펙트가 지속되는 시간의 길이는 timeConstant에 의해 제어됩니다.</p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="UGtPBSbQ6F5oUcXExSQ9WCjm8hBo5bIvLV6Vz2VS4is=" data-language="js"><span class="token comment">// 오디오 컨텍스트를 생성합니다</span>
<span class="token keyword">var</span> AudioContext <span class="token operator">=</span> window<span class="token punctuation">.</span>AudioContext <span class="token operator">||</span> window<span class="token punctuation">.</span>webkitAudioContext<span class="token punctuation">;</span>
<span class="token keyword">var</span> audioCtx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AudioContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 예제를 위한 기본 변수를 설정합니다</span>
<span class="token keyword">var</span> myAudio <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'audio'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> pre <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'pre'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myScript <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'script'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

pre<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> myScript<span class="token punctuation">.</span>innerHTML<span class="token punctuation">;</span>

<span class="token keyword">var</span> atTimePlus <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.at-time-plus'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> atTimeMinus <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.at-time-minus'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// MediaElementAudioSourceNode를 생성합니다</span>
<span class="token comment">// HTMLMediaElement를 노드 내로 전달합니다</span>
<span class="token keyword">var</span> source <span class="token operator">=</span> audioCtx<span class="token punctuation">.</span><span class="token function">createMediaElementSource</span><span class="token punctuation">(</span>myAudio<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// gain 노드를 생성하고 gain 값을 0.5로 설정합니다</span>
<span class="token keyword">var</span> gainNode <span class="token operator">=</span> audioCtx<span class="token punctuation">.</span><span class="token function">createGain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
gainNode<span class="token punctuation">.</span>gain<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">0.5</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> currGain <span class="token operator">=</span> gainNode<span class="token punctuation">.</span>gain<span class="token punctuation">.</span>value<span class="token punctuation">;</span>

<span class="token comment">// AudioBufferSourceNode를 gainNode에 연결하고</span>
<span class="token comment">// gainNode를 destination에 연결합니다</span>
source<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>gainNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
gainNode<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>audioCtx<span class="token punctuation">.</span>destination<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// onclick이 발생했을 때 무언가를 하기 위해 버튼을 설정합니다</span>
atTimePlus<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  currGain <span class="token operator">=</span> <span class="token number">1.0</span><span class="token punctuation">;</span>
  gainNode<span class="token punctuation">.</span>gain<span class="token punctuation">.</span><span class="token function">setTargetAtTime</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">,</span> audioCtx<span class="token punctuation">.</span>currentTime <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

atTimeMinus<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  currGain <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  gainNode<span class="token punctuation">.</span>gain<span class="token punctuation">.</span><span class="token function">setTargetAtTime</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> audioCtx<span class="token punctuation">.</span>currentTime <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre>
</div>
</div>
<h2 id="명세서">명세서</h2>
<div class="_table"><table class="standard-table">
<thead><tr><th scope="col">Specification</th></tr></thead>
<tbody><tr><td><a href="https://webaudio.github.io/web-audio-api/#dom-audioparam-settargetattime">Web Audio API <br><small># dom-audioparam-settargetattime</small></a></td></tr></tbody>
</table></div>
<h2 id="브라우저_호환성">브라우저 호환성</h2>
<p>BCD tables only load in the browser<noscript> with JavaScript enabled. Enable JavaScript to view data.</noscript></p>
<h2 id="같이_보기">같이 보기</h2>
<div class="section-content"><ul> <li><a href="../web_audio_api/using_web_audio_api">Web Audio API 사용하기</a></li> </ul></div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2023 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/ko/docs/Web/API/AudioParam/setTargetAtTime" class="_attribution-link">https://developer.mozilla.org/ko/docs/Web/API/AudioParam/setTargetAtTime</a>
  </p>
</div>
