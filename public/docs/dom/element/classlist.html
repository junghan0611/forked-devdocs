<header><h1>Element.classList</h1></header><div class="section-content">
<p><code>Element.classList</code> 는 엘리먼트의 클래스 속성의 컬렉션인 활성 <a href="../domtokenlist"><code>DOMTokenList</code></a>를 반환하는 읽기 전용 프로퍼티이다.</p> <p><code>classList</code> 사용은 공백으로 구분된 문자열인 <a href="classname"><code>element.className</code></a>을 통해 엘리먼트의 클래스 목록에 접근하는 방식을 대체하는 간편한 방법이다.</p>
</div>
<h2 id="구문">구문</h2>
<div class="section-content">
<pre class="notranslate">const elementClasses = elementNodeReference.classList;
</pre> <p><code>elementClasses</code>는 <code>elementNodeReference</code>의 클래스 속성을 나타내는 <a href="../domtokenlist"><code>DOMTokenList</code></a>이다. 만약 클래스 속성이 설정되어 있지 않거나 비어있다면 <em>elementClasses.length</em>는 <code>0</code>을 반환한다. <code>element.classList</code> 그 자체는 읽기 전용 프로퍼티지만 <code>add()</code>와 <code>remove()</code> 메서드를 이용하여 변형할 수 있다.</p>
</div>
<h2 id="메서드">메서드</h2>
<div class="section-content"><dl> <dt id="add_string_string_..._"><code>add( String [, String [, ...]] )</code></dt> <dd>지정한 클래스 값을 추가한다. 만약 추가하려는 클래스가 엘리먼트의 <code>class</code> 속성에 이미 존재한다면 무시한다.</dd> <dt id="remove_string_string_..._"><code>remove( String [, String [, ...]] )</code></dt> <dd>지정한 클래스 값을 제거한다.</dd> <dd> <div class="note notecard" id="sect1">
<strong>노트:</strong> 존재하지 않는 클래스를 제거하는 것은 <strong>에러를 발생시키지 않습니다.</strong>
</div> </dd> <dt id="item_number_"><code><strong>item</strong>( Number )</code></dt> <dd>콜렉션의 인덱스를 이용하여 클래스 값을 반환한다.</dd> <dt id="toggle_string_force_"><code><strong>toggle</strong>( String [, force] )</code></dt> <dd>하나의 인수만 있을 때: 클래스 값을 토글링한다. 즉, 클래스가 존재한다면 제거하고 <code>false</code>를 반환하며, 존재하지 않으면 클래스를 추가하고 <code>true</code>를 반환한다.</dd> <dd>두번째 인수가 있을 때: 두번째 인수가 <code>true</code>로 평가되면 지정한 클래스 값을 추가하고 <code>false</code>로 평가되면 제거한다.</dd> <dt id="contains_string_"><code>contains( String )</code></dt> <dd>지정한 클래스 값이 엘리먼트의 <code>class</code> 속성에 존재하는지 확인한다.</dd> <dt id="replace_oldclass_newclass_"><code>replace( oldClass, newClass )</code></dt> <dd>존재하는 클래스를 새로운 클래스로 교체한다.</dd> </dl></div>
<h2 id="예제">예제</h2>
<div class="section-content">
<div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="xlo/HxxQssaettV5TOvlpaPalgL2CAIgl8AtdmkP7DI=" data-language="js"><span class="token keyword">const</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
div<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'foo'</span><span class="token punctuation">;</span>

<span class="token comment">// our starting state: &lt;div class="foo"&gt;&lt;/div&gt;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>div<span class="token punctuation">.</span>outerHTML<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// use the classList API to remove and add classes</span>
div<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">"foo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
div<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"anotherclass"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// &lt;div class="anotherclass"&gt;&lt;/div&gt;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>div<span class="token punctuation">.</span>outerHTML<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// if visible is set remove it, otherwise add it</span>
div<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">toggle</span><span class="token punctuation">(</span><span class="token string">"visible"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// add/remove visible, depending on test conditional, i less than 10</span>
div<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">toggle</span><span class="token punctuation">(</span><span class="token string">"visible"</span><span class="token punctuation">,</span> i <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>div<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"foo"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// add or remove multiple classes</span>
div<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"foo"</span><span class="token punctuation">,</span> <span class="token string">"bar"</span><span class="token punctuation">,</span> <span class="token string">"baz"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
div<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">"foo"</span><span class="token punctuation">,</span> <span class="token string">"bar"</span><span class="token punctuation">,</span> <span class="token string">"baz"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// add or remove multiple classes using spread syntax</span>
<span class="token keyword">const</span> cls <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"foo"</span><span class="token punctuation">,</span> <span class="token string">"bar"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
div<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token operator">...</span>cls<span class="token punctuation">)</span><span class="token punctuation">;</span>
div<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token operator">...</span>cls<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// replace class "foo" with class "bar"</span>
div<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"foo"</span><span class="token punctuation">,</span> <span class="token string">"bar"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</div> <div class="notecard note" id="sect2"> <p><strong>참고:</strong> 파이어폭스 26 이전의 버전에서는 add/remove/toggle 메서드에서 여러 인수의 사용을 구현하지 않았다. <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=814014" target="_blank">https://bugzilla.mozilla.org/show_bug.cgi?id=814014</a> 링크를 참조하라.</p> </div>
</div>
<h2 id="폴리필">폴리필</h2>
<div class="section-content">
<p>The legacy <a href="https://msdn.microsoft.com/en-us/windows/ms536956(v=vs.71)" target="_blank"><code>onpropertychange</code></a> event can be used to create a living <code>classList</code> mockup thanks to a <code>Element.prototype.className</code> property that fires the specified event once it is changed.</p> <p>The following polyfill for both <code>classList</code> and <code>DOMTokenList</code> ensures <strong>full</strong> compliance (coverage) for all standard methods and properties of <code>Element.prototype.classList</code> for <strong>IE10</strong>-<strong>IE11</strong> browsers plus <em>nearly</em> compliant behavior for <strong>IE 6-9</strong>. Check it out:</p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="u93gXvdxJwDZ1fugJ5ju34/4jLnivQA9CISxk10PDCQ=" data-language="js"><span class="token comment">// 1. String.prototype.trim polyfill</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token string">""</span><span class="token punctuation">.</span>trim<span class="token punctuation">)</span> <span class="token class-name">String</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">trim</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex"><span class="token anchor function">^</span><span class="token char-class"><span class="token char-class-punctuation punctuation">[</span><span class="token char-set class-name">\s</span>﻿<span class="token char-class-punctuation punctuation">]</span></span><span class="token quantifier number">+</span><span class="token alternation keyword">|</span><span class="token char-class"><span class="token char-class-punctuation punctuation">[</span><span class="token char-set class-name">\s</span>﻿<span class="token char-class-punctuation punctuation">]</span></span><span class="token quantifier number">+</span><span class="token anchor function">$</span></span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">window</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token string">"use strict"</span><span class="token punctuation">;</span> <span class="token comment">// prevent global namespace pollution</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>window<span class="token punctuation">.</span>DOMException<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function-variable function">DOMException</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">reason</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>message <span class="token operator">=</span> reason<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> wsRE <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex"><span class="token char-class"><span class="token char-class-punctuation punctuation">[</span><span class="token escape">\1</span>1<span class="token escape">\1</span>2<span class="token escape">\1</span>4<span class="token escape">\1</span>5<span class="token escape">\4</span>0<span class="token char-class-punctuation punctuation">]</span></span></span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> wsIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token function-variable function">checkIfValidClassListEntry</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token constant">O</span><span class="token punctuation">,</span> <span class="token constant">V</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">V</span> <span class="token operator">===</span> <span class="token string">""</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">DOMException</span><span class="token punctuation">(</span>
    <span class="token string">"Failed to execute '"</span> <span class="token operator">+</span> <span class="token constant">O</span> <span class="token operator">+</span> <span class="token string">"' on 'DOMTokenList': The token provided must not be empty."</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>wsIndex<span class="token operator">=</span><span class="token constant">V</span><span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span>wsRE<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">!==</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">DOMException</span><span class="token punctuation">(</span><span class="token string">"Failed to execute '"</span><span class="token operator">+</span><span class="token constant">O</span><span class="token operator">+</span><span class="token string">"' on 'DOMTokenList': "</span> <span class="token operator">+</span>
    <span class="token string">"The token provided ('"</span><span class="token operator">+</span><span class="token constant">V</span><span class="token punctuation">[</span>wsIndex<span class="token punctuation">]</span><span class="token operator">+</span><span class="token string">"') contains HTML space characters, which are not valid in tokens."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 2. Implement the barebones DOMTokenList livelyness polyfill</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> DOMTokenList <span class="token operator">!==</span> <span class="token string">"function"</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">window</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> document <span class="token operator">=</span> window<span class="token punctuation">.</span>document<span class="token punctuation">,</span> Object <span class="token operator">=</span> window<span class="token punctuation">.</span>Object<span class="token punctuation">,</span> hasOwnProp <span class="token operator">=</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>hasOwnProperty<span class="token punctuation">;</span>
    <span class="token keyword">var</span> defineProperty <span class="token operator">=</span> Object<span class="token punctuation">.</span>defineProperty<span class="token punctuation">,</span> allowTokenListConstruction <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> skipPropChange <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">DOMTokenList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>allowTokenListConstruction<span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token function">TypeError</span><span class="token punctuation">(</span><span class="token string">"Illegal constructor"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// internally let it through</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">DOMTokenList</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>toString <span class="token operator">=</span> <span class="token class-name">DOMTokenList</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">toLocaleString</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token class-name">DOMTokenList</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> v<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> argLen<span class="token operator">=</span>arguments<span class="token punctuation">.</span>length<span class="token punctuation">,</span>val<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">,</span>ele<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">[</span><span class="token string">" uCL"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>proto<span class="token operator">=</span>ele<span class="token punctuation">[</span><span class="token string">" uCLp"</span><span class="token punctuation">]</span><span class="token punctuation">;</span> v<span class="token operator">!==</span>argLen<span class="token punctuation">;</span> <span class="token operator">++</span>v<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            val <span class="token operator">=</span> arguments<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">""</span><span class="token punctuation">,</span> <span class="token function">checkIfValidClassListEntry</span><span class="token punctuation">(</span><span class="token string">"add"</span><span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> Len<span class="token operator">=</span>proto<span class="token punctuation">.</span>length<span class="token punctuation">,</span> resStr<span class="token operator">=</span>val<span class="token punctuation">;</span> i <span class="token operator">!==</span> Len<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">===</span> val<span class="token punctuation">)</span> <span class="token keyword">continue</span> a<span class="token punctuation">;</span> <span class="token keyword">else</span> resStr <span class="token operator">+=</span> <span class="token string">" "</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">[</span>Len<span class="token punctuation">]</span> <span class="token operator">=</span> val<span class="token punctuation">,</span> proto<span class="token punctuation">.</span>length <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">,</span> proto<span class="token punctuation">.</span>value <span class="token operator">=</span> resStr<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        skipPropChange <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> ele<span class="token punctuation">.</span>className <span class="token operator">=</span> proto<span class="token punctuation">.</span>value<span class="token punctuation">,</span> skipPropChange <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token class-name">DOMTokenList</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">remove</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> v<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> argLen<span class="token operator">=</span>arguments<span class="token punctuation">.</span>length<span class="token punctuation">,</span>val<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">,</span>ele<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">[</span><span class="token string">" uCL"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>proto<span class="token operator">=</span>ele<span class="token punctuation">[</span><span class="token string">" uCLp"</span><span class="token punctuation">]</span><span class="token punctuation">;</span> v <span class="token operator">!==</span> argLen<span class="token punctuation">;</span> <span class="token operator">++</span>v<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            val <span class="token operator">=</span> arguments<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">""</span><span class="token punctuation">,</span> <span class="token function">checkIfValidClassListEntry</span><span class="token punctuation">(</span><span class="token string">"remove"</span><span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> Len<span class="token operator">=</span>proto<span class="token punctuation">.</span>length<span class="token punctuation">,</span> resStr<span class="token operator">=</span><span class="token string">""</span><span class="token punctuation">,</span> is<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">!==</span> Len<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!==</span> val<span class="token punctuation">)</span><span class="token punctuation">{</span> resStr<span class="token operator">+=</span><span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">+</span><span class="token string">" "</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span> is<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>is<span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>
            <span class="token keyword">delete</span> <span class="token keyword">this</span><span class="token punctuation">[</span>Len<span class="token punctuation">]</span><span class="token punctuation">,</span> proto<span class="token punctuation">.</span>length <span class="token operator">-=</span> <span class="token number">1</span><span class="token punctuation">,</span> proto<span class="token punctuation">.</span>value <span class="token operator">=</span> resStr<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        skipPropChange <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> ele<span class="token punctuation">.</span>className <span class="token operator">=</span> proto<span class="token punctuation">.</span>value<span class="token punctuation">,</span> skipPropChange <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    window<span class="token punctuation">.</span>DOMTokenList <span class="token operator">=</span> DOMTokenList<span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">whenPropChanges</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> evt <span class="token operator">=</span> window<span class="token punctuation">.</span>event<span class="token punctuation">,</span> prop <span class="token operator">=</span> evt<span class="token punctuation">.</span>propertyName<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>skipPropChange <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>prop<span class="token operator">===</span><span class="token string">"className"</span> <span class="token operator">||</span> <span class="token punctuation">(</span>prop<span class="token operator">===</span><span class="token string">"classList"</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>defineProperty<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> target <span class="token operator">=</span> evt<span class="token punctuation">.</span>srcElement<span class="token punctuation">,</span> protoObjProto <span class="token operator">=</span> target<span class="token punctuation">[</span><span class="token string">" uCLp"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> strval <span class="token operator">=</span> <span class="token string">""</span> <span class="token operator">+</span> target<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> tokens<span class="token operator">=</span>strval<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span>wsRE<span class="token punctuation">)</span><span class="token punctuation">,</span> resTokenList<span class="token operator">=</span>target<span class="token punctuation">[</span>prop<span class="token operator">===</span><span class="token string">"classList"</span><span class="token operator">?</span><span class="token string">" uCL"</span><span class="token operator">:</span><span class="token string">"classList"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> oldLen <span class="token operator">=</span> protoObjProto<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
            <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> cI <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> cLen <span class="token operator">=</span> protoObjProto<span class="token punctuation">.</span>length <span class="token operator">=</span> tokens<span class="token punctuation">.</span>length<span class="token punctuation">,</span> sub <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> cI <span class="token operator">!==</span> cLen<span class="token punctuation">;</span> <span class="token operator">++</span>cI<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> innerI<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> innerI<span class="token operator">!==</span>cI<span class="token punctuation">;</span> <span class="token operator">++</span>innerI<span class="token punctuation">)</span> <span class="token keyword">if</span><span class="token punctuation">(</span>tokens<span class="token punctuation">[</span>innerI<span class="token punctuation">]</span><span class="token operator">===</span>tokens<span class="token punctuation">[</span>cI<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>sub<span class="token operator">++</span><span class="token punctuation">;</span> <span class="token keyword">continue</span> a<span class="token punctuation">;</span><span class="token punctuation">}</span>
                resTokenList<span class="token punctuation">[</span>cI<span class="token operator">-</span>sub<span class="token punctuation">]</span> <span class="token operator">=</span> tokens<span class="token punctuation">[</span>cI<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span>cLen<span class="token operator">-</span>sub<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> oldLen<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token keyword">delete</span> resTokenList<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//remove trailing indexs</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>prop <span class="token operator">!==</span> <span class="token string">"classList"</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
            skipPropChange <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> target<span class="token punctuation">.</span>classList <span class="token operator">=</span> resTokenList<span class="token punctuation">,</span> target<span class="token punctuation">.</span>className <span class="token operator">=</span> strval<span class="token punctuation">;</span>
            skipPropChange <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> resTokenList<span class="token punctuation">.</span>length <span class="token operator">=</span> tokens<span class="token punctuation">.</span>length <span class="token operator">-</span> sub<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">function</span> <span class="token function">polyfillClassList</span><span class="token punctuation">(</span><span class="token parameter">ele</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>ele <span class="token operator">||</span> <span class="token operator">!</span><span class="token punctuation">(</span><span class="token string">"innerHTML"</span> <span class="token keyword">in</span> ele<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token function">TypeError</span><span class="token punctuation">(</span><span class="token string">"Illegal invocation"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ele<span class="token punctuation">.</span><span class="token function">detachEvent</span><span class="token punctuation">(</span> <span class="token string">"onpropertychange"</span><span class="token punctuation">,</span> whenPropChanges <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// prevent duplicate handler infinite loop</span>
        allowTokenListConstruction <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span><span class="token punctuation">{</span> <span class="token keyword">function</span> <span class="token function">protoObj</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span> protoObj<span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DOMTokenList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">finally</span> <span class="token punctuation">{</span> allowTokenListConstruction <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">}</span>
        <span class="token keyword">var</span> protoObjProto <span class="token operator">=</span> protoObj<span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> resTokenList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">protoObj</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> toks<span class="token operator">=</span>ele<span class="token punctuation">.</span>className<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span>wsRE<span class="token punctuation">)</span><span class="token punctuation">,</span> cI<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> cLen<span class="token operator">=</span>toks<span class="token punctuation">.</span>length<span class="token punctuation">,</span> sub<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> cI <span class="token operator">!==</span> cLen<span class="token punctuation">;</span> <span class="token operator">++</span>cI<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> innerI<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> innerI <span class="token operator">!==</span> cI<span class="token punctuation">;</span> <span class="token operator">++</span>innerI<span class="token punctuation">)</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>toks<span class="token punctuation">[</span>innerI<span class="token punctuation">]</span> <span class="token operator">===</span> toks<span class="token punctuation">[</span>cI<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> sub<span class="token operator">++</span><span class="token punctuation">;</span> <span class="token keyword">continue</span> a<span class="token punctuation">;</span> <span class="token punctuation">}</span>
            <span class="token keyword">this</span><span class="token punctuation">[</span>cI<span class="token operator">-</span>sub<span class="token punctuation">]</span> <span class="token operator">=</span> toks<span class="token punctuation">[</span>cI<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        protoObjProto<span class="token punctuation">.</span>length <span class="token operator">=</span> cLen<span class="token operator">-</span>sub<span class="token punctuation">,</span> protoObjProto<span class="token punctuation">.</span>value <span class="token operator">=</span> ele<span class="token punctuation">.</span>className<span class="token punctuation">,</span> protoObjProto<span class="token punctuation">[</span><span class="token string">" uCL"</span><span class="token punctuation">]</span> <span class="token operator">=</span> ele<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>defineProperty<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">defineProperty</span><span class="token punctuation">(</span>ele<span class="token punctuation">,</span> <span class="token string">"classList"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token comment">// IE8 &amp; IE9 allow defineProperty on the DOM</span>
            <span class="token literal-property property">enumerable</span><span class="token operator">:</span>   <span class="token number">1</span><span class="token punctuation">,</span> <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">return</span> resTokenList<span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">configurable</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">newVal</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                skipPropChange <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> ele<span class="token punctuation">.</span>className <span class="token operator">=</span> protoObjProto<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token punctuation">(</span>newVal <span class="token operator">+=</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">,</span> skipPropChange <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                <span class="token keyword">var</span> toks <span class="token operator">=</span> newVal<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span>wsRE<span class="token punctuation">)</span><span class="token punctuation">,</span> oldLen <span class="token operator">=</span> protoObjProto<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
                <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> cI <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> cLen <span class="token operator">=</span> protoObjProto<span class="token punctuation">.</span>length <span class="token operator">=</span> toks<span class="token punctuation">.</span>length<span class="token punctuation">,</span> sub <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> cI <span class="token operator">!==</span> cLen<span class="token punctuation">;</span> <span class="token operator">++</span>cI<span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> innerI<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> innerI<span class="token operator">!==</span>cI<span class="token punctuation">;</span> <span class="token operator">++</span>innerI<span class="token punctuation">)</span> <span class="token keyword">if</span><span class="token punctuation">(</span>toks<span class="token punctuation">[</span>innerI<span class="token punctuation">]</span><span class="token operator">===</span>toks<span class="token punctuation">[</span>cI<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>sub<span class="token operator">++</span><span class="token punctuation">;</span> <span class="token keyword">continue</span> a<span class="token punctuation">;</span><span class="token punctuation">}</span>
                    resTokenList<span class="token punctuation">[</span>cI<span class="token operator">-</span>sub<span class="token punctuation">]</span> <span class="token operator">=</span> toks<span class="token punctuation">[</span>cI<span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span>cLen<span class="token operator">-</span>sub<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> oldLen<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token keyword">delete</span> resTokenList<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//remove trailing indexs</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">defineProperty</span><span class="token punctuation">(</span>ele<span class="token punctuation">,</span> <span class="token string">" uCLp"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token comment">// for accessing the hidden prototype</span>
            <span class="token literal-property property">enumerable</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">configurable</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">writeable</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> protoObj<span class="token punctuation">.</span>prototype
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">defineProperty</span><span class="token punctuation">(</span>protoObjProto<span class="token punctuation">,</span> <span class="token string">" uCL"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">enumerable</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">configurable</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">writeable</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> ele
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> ele<span class="token punctuation">.</span>classList<span class="token operator">=</span>resTokenList<span class="token punctuation">,</span> ele<span class="token punctuation">[</span><span class="token string">" uCL"</span><span class="token punctuation">]</span><span class="token operator">=</span>resTokenList<span class="token punctuation">,</span> ele<span class="token punctuation">[</span><span class="token string">" uCLp"</span><span class="token punctuation">]</span><span class="token operator">=</span>protoObj<span class="token punctuation">.</span>prototype<span class="token punctuation">;</span> <span class="token punctuation">}</span>
        ele<span class="token punctuation">.</span><span class="token function">attachEvent</span><span class="token punctuation">(</span> <span class="token string">"onpropertychange"</span><span class="token punctuation">,</span> whenPropChanges <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span> <span class="token comment">// Much faster &amp; cleaner version for IE8 &amp; IE9:</span>
        <span class="token comment">// Should work in IE8 because Element.prototype instanceof Node is true according to the specs</span>
        window<span class="token punctuation">.</span>Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span><span class="token class-name">Element</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token string">"classList"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">enumerable</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>   <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">hasOwnProp</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"classList"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token function">polyfillClassList</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>classList<span class="token punctuation">;</span>
                                <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">configurable</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>className <span class="token operator">=</span> val<span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// Less performant fallback for older browsers (IE 6-8):</span>
        window<span class="token punctuation">[</span><span class="token string">" uCL"</span><span class="token punctuation">]</span> <span class="token operator">=</span> polyfillClassList<span class="token punctuation">;</span>
        <span class="token comment">// the below code ensures polyfillClassList is applied to all current and future elements in the doc.</span>
        document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>firstChild<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'style'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>styleSheet<span class="token punctuation">.</span>cssText<span class="token operator">=</span><span class="token punctuation">(</span>
            <span class="token string">'_*{x-uCLp:expression(!this.hasOwnProperty("classList")&amp;&amp;window[" uCL"](this))}'</span> <span class="token operator">+</span> <span class="token comment">//  IE6</span>
            <span class="token string">'[class]{x-uCLp/**/:expression(!this.hasOwnProperty("classList")&amp;&amp;window[" uCL"](this))}'</span> <span class="token comment">//IE7-8</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 3. Patch in unsupported methods in DOMTokenList</span>
<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">DOMTokenListProto<span class="token punctuation">,</span> testClass</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>DOMTokenListProto<span class="token punctuation">.</span>item<span class="token punctuation">)</span> DOMTokenListProto<span class="token punctuation">.</span><span class="token function-variable function">item</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">function</span> <span class="token function">NullCheck</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> n<span class="token operator">===</span><span class="token keyword">void</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> n<span class="token punctuation">}</span> <span class="token keyword">return</span> <span class="token function">NullCheck</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>DOMTokenListProto<span class="token punctuation">.</span>toggle <span class="token operator">||</span> testClass<span class="token punctuation">.</span><span class="token function">toggle</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">!==</span><span class="token boolean">false</span><span class="token punctuation">)</span> DOMTokenListProto<span class="token punctuation">.</span><span class="token function-variable function">toggle</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>arguments<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span>arguments<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token string">"add"</span> <span class="token operator">:</span> <span class="token string">"remove"</span><span class="token punctuation">]</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">!</span><span class="token operator">!</span>arguments<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> oldValue <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>oldValue<span class="token punctuation">)</span><span class="token punctuation">,</span> oldValue <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token comment">/*|| false*/</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>DOMTokenListProto<span class="token punctuation">.</span>replace <span class="token operator">||</span> <span class="token keyword">typeof</span> testClass<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">,</span> <span class="token string">"b"</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token string">"boolean"</span><span class="token punctuation">)</span>
        DOMTokenListProto<span class="token punctuation">.</span><span class="token function-variable function">replace</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">oldToken<span class="token punctuation">,</span> newToken</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token function">checkIfValidClassListEntry</span><span class="token punctuation">(</span><span class="token string">"replace"</span><span class="token punctuation">,</span> oldToken<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">checkIfValidClassListEntry</span><span class="token punctuation">(</span><span class="token string">"replace"</span><span class="token punctuation">,</span> newToken<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> oldValue <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>oldToken<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">!==</span> oldValue <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>newToken<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>DOMTokenListProto<span class="token punctuation">.</span>contains<span class="token punctuation">)</span> DOMTokenListProto<span class="token punctuation">.</span><span class="token function-variable function">contains</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>Len<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">!==</span> Len<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">===</span> value<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>DOMTokenListProto<span class="token punctuation">.</span>forEach<span class="token punctuation">)</span> DOMTokenListProto<span class="token punctuation">.</span><span class="token function-variable function">forEach</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">f</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>arguments<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> Len <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">!==</span> Len<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token function">f</span><span class="token punctuation">(</span> <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>Len<span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">,</span>tArg<span class="token operator">=</span>arguments<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span> i <span class="token operator">!==</span> Len<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token function">f</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>tArg<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>DOMTokenListProto<span class="token punctuation">.</span>entries<span class="token punctuation">)</span> DOMTokenListProto<span class="token punctuation">.</span><span class="token function-variable function">entries</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> nextIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> that <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token function-variable function">next</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> nextIndex<span class="token operator">&lt;</span>that<span class="token punctuation">.</span>length <span class="token operator">?</span> <span class="token punctuation">{</span><span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token punctuation">[</span>nextIndex<span class="token punctuation">,</span> that<span class="token punctuation">[</span>nextIndex<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token literal-property property">done</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">}</span> <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">done</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>DOMTokenListProto<span class="token punctuation">.</span>values<span class="token punctuation">)</span> DOMTokenListProto<span class="token punctuation">.</span><span class="token function-variable function">values</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> nextIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> that <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token function-variable function">next</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> nextIndex<span class="token operator">&lt;</span>that<span class="token punctuation">.</span>length <span class="token operator">?</span> <span class="token punctuation">{</span><span class="token literal-property property">value</span><span class="token operator">:</span> that<span class="token punctuation">[</span>nextIndex<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token literal-property property">done</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">}</span> <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">done</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>DOMTokenListProto<span class="token punctuation">.</span>keys<span class="token punctuation">)</span> DOMTokenListProto<span class="token punctuation">.</span><span class="token function-variable function">keys</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> nextIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> that <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token function-variable function">next</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> nextIndex<span class="token operator">&lt;</span>that<span class="token punctuation">.</span>length <span class="token operator">?</span> <span class="token punctuation">{</span><span class="token literal-property property">value</span><span class="token operator">:</span> nextIndex<span class="token punctuation">,</span> <span class="token literal-property property">done</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">}</span> <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">done</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span><span class="token class-name">DOMTokenList</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> window<span class="token punctuation">.</span>document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>classList<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</div>
</div>
<h3 id="caveats">Caveats</h3>
<div class="section-content">
<p>The polyfill is limited in functionality. It's currently unable to polyfill out-of-document-elements (e.g. elements created by <code>document.createElement</code> before they are appended to a parent node) in IE6-7.</p> <p>However, it should work just fine in IE9. A major discrepancy between the polyfilled version of <code>classList</code> and the W3 specs is that for IE6-8, there is no way to create an immutable object (an object whose properties cannot be directly modified). In IE9, however, it is possible through extending the prototype, freezing the visible object, and overwritting native property methods. However, such actions would not work in IE6-IE8 and, in IE9, slow the performance of the entire webpage to a snail's crawl, making these modifications completely impractical for this polyfill.</p> <p>A minor note is that in IE6-7, this polyfill uses the <code>window[" uCL"]</code> property on the window object for communicating with the CSS expressions, the <code>x-uCLp</code> css property on all elements, and the <code>element[" uCL"]</code> property on all elements to allow garbage collection and boost performance. In all polyfilled browsers (IE6-9), an additional <code>element[" uCLp"]</code> property is added to element to ensure standards compliant prototyping, and a <code>DOMTokenList[" uCL"]</code>property is added to each <code>element["classList"]</code> object to ensure that the DOMTokenList is bounded to its own element.</p>
</div>
<h2 id="명세">명세</h2>
<div class="_table"><table class="standard-table">
<thead><tr><th scope="col">Specification</th></tr></thead>
<tbody><tr><td><a href="#">DOM Standard <br><small># ref-for-dom-element-classlist①</small></a></td></tr></tbody>
</table></div>
<h2 id="브라우저_호환성">브라우저 호환성</h2>
<p>BCD tables only load in the browser<noscript> with JavaScript enabled. Enable JavaScript to view data.</noscript></p>
<h2 id="참고">참고</h2>
<div class="section-content"><ul> <li><a href="classname"><code>element.className</code></a></li> <li><a href="../domtokenlist"><code>DOMTokenList</code></a></li> </ul></div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2023 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/ko/docs/Web/API/Element/classList" class="_attribution-link">https://developer.mozilla.org/ko/docs/Web/API/Element/classList</a>
  </p>
</div>
