<header><h1>Geolocation API 사용하기</h1></header><div class="section-content">
<div class="notecard secure" id="sect1"><p><strong>Secure context:</strong> This feature is available only in <a href="https://developer.mozilla.org/ko/docs/Web/Security/Secure_Contexts">secure contexts</a> (HTTPS), in some or all <a href="#browser_compatibility">supporting browsers</a>.</p></div> <p>Geolocation API는 사용자의 현재 위치를 가져오는 API로, 지도에 사용자 위치를 표시하는 등 다양한 용도로 사용할 수 있습니다. 이 글에서는 Geolocation API의 기초 사용법을 설명합니다.</p>
</div>
<h2 id="geolocation_객체">geolocation 객체</h2>
<div class="section-content">
<p><a href="../geolocation">Geolocation API</a>는 <a href="../navigator/geolocation"><code>navigator.geolocation</code></a> 객체를 통해 사용할 수 있습니다.</p> <p><code>geolocation</code> 객체가 존재하는 경우 위치 정보 서비스를 지원하는 것입니다. 객체의 존재 여부는 다음과 같이 알아낼 수 있습니다.</p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="mXcy+GMThOCliqr2IiC+tehDYRiiXhQd2u8Ar7J7S8U=" data-language="js"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"geolocation"</span> <span class="token keyword">in</span> navigator<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">/* 위치정보 사용 가능 */</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token comment">/* 위치정보 사용 불가능 */</span>
<span class="token punctuation">}</span>
</pre>
</div>
</div>
<h3 id="현재_위치_가져오기">현재 위치 가져오기</h3>
<div class="section-content">
<p>사용자의 현재 위치는 <a href="../geolocation/getcurrentposition"><code>getCurrentPosition()</code></a> 메서드를 호출해서 가져올 수 있습니다. 이 메서드는 사용자의 위치를 탐지하는 비동기 요청을 시작하고, 위치 관련 하드웨어에 최신 정보를 요청하며, 위치를 알아낸 후 주어진 콜백 함수를 호출합니다. 선택적으로, 오류가 발생하면 호출할 콜백을 두 번째 매개변수로 지정할 수 있습니다. 또 다른 선택 사항인 세 번째 매개변수는 위치 정보의 최대 수명, 요청의 최대 대기시간, 고정밀 위치정보 여부 등의 옵션을 담은 객체입니다.</p> <div class="notecard note" id="sect2"> <p><strong>참고:</strong> <a href="../geolocation/getcurrentposition"><code>getCurrentPosition()</code></a>의 기본 설정에서는 정밀도가 낮더라도 최대한 빠르게 응답을 반환하므로, 정확도보다 속도가 중요한 상황에서 유용합니다. 예를 들어, GPS 기능을 가진 장비는 보정 과정에 수 분이 걸릴 수도 있으므로 그동안 IP 위치와 Wi-Fi 등 정확하지 않은 출처에 기반한 위치 정보를 반환할 수 있습니다.</p> </div> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="el1dCvUIKnt5DgTEi/v1gVWvPQimDw5uZ8NI7/8pXys=" data-language="js">navigator<span class="token punctuation">.</span>geolocation<span class="token punctuation">.</span><span class="token function">getCurrentPosition</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">position</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">doSomething</span><span class="token punctuation">(</span>position<span class="token punctuation">.</span>coords<span class="token punctuation">.</span>latitude<span class="token punctuation">,</span> position<span class="token punctuation">.</span>coords<span class="token punctuation">.</span>longitude<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</div> <p>위의 예제는 사용자 위치가 확인되면 <code>doSomething()</code> 함수를 실행합니다.</p>
</div>
<h3 id="현재_위치_추적하기">현재 위치 추적하기</h3>
<div class="section-content">
<p>장치의 이동이나 위치 정밀도 향상으로 인해 위치 정보가 바뀔 때 호출할 콜백 함수를 <a href="../geolocation/watchposition"><code>watchPosition()</code></a> 메서드로 설정할 수 있습니다. 이 메서드의 매개변수는 <a href="../geolocation/getcurrentposition"><code>getCurrentPosition()</code></a>과 같습니다. 이 콜백은 여러 번 호출될 수 있으므로 브라우저가 사용자의 움직임에 따라 위치를 업데이트하거나, 고정밀 위치 기술을 적용해 보다 정밀한 위치를 표시할 수 있습니다. <code>getCurrentPosition()</code>과 마찬가지로 선택 사항인 오류 콜백 역시 여러 번 호출될 수 있습니다.</p> <div class="notecard note" id="sect3"> <p><strong>참고:</strong> <a href="../geolocation/getcurrentposition"><code>getCurrentPosition()</code></a>을 먼저 호출하지 않아도 <a href="../geolocation/watchposition"><code>watchPosition()</code></a>을 사용할 수 있습니다.</p> </div> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="VayrQYQ2eVcNb1+l3kjFKjhFx84VibTEBfr2677VkGg=" data-language="js"><span class="token keyword">const</span> watchID <span class="token operator">=</span> navigator<span class="token punctuation">.</span>geolocation<span class="token punctuation">.</span><span class="token function">watchPosition</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">position</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">doSomething</span><span class="token punctuation">(</span>position<span class="token punctuation">.</span>coords<span class="token punctuation">.</span>latitude<span class="token punctuation">,</span> position<span class="token punctuation">.</span>coords<span class="token punctuation">.</span>longitude<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</div> <p><a href="../geolocation/watchposition"><code>watchPosition()</code></a> 메서드는 위치 추적 요청을 식별할 수 있는 고유 숫자를 반환합니다. 이 숫자를 <a href="../geolocation/clearwatch"><code>clearWatch()</code></a> 메서드에 전달하면 해당 위치 추적을 종료할 수 있습니다.</p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="NLk6heLSl1yWQ1VDtPaxQJAYC/8AK2sJrA/mVXDo2N8=" data-language="js">navigator<span class="token punctuation">.</span>geolocation<span class="token punctuation">.</span><span class="token function">clearWatch</span><span class="token punctuation">(</span>watchID<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</div>
</div>
<h3 id="응답_미세_조정">응답 미세 조정</h3>
<div class="section-content">
<p><a href="../geolocation/getcurrentposition"><code>getCurrentPosition()</code></a>과 <a href="../geolocation/watchposition"><code>watchPosition()</code></a> 둘 다 성공 콜백, 실패 콜백, 그리고 옵션 객체를 받을 수 있습니다.</p> <p>이 옵션 객체로는 고정밀도 활성화 여부, 위치 정보의 최대 수명(수명이 끝나기 전에는 이전에 반환했던 위치 정보를 저장했다가, 같은 요청을 또 받으면 그대로 반환합니다), 그리고 위치 정보 요청의 응답을 기다릴 최대 대기시간을 지정할 수 있습니다.</p> <p>옵션 객체를 사용한 <a href="../geolocation/watchposition"><code>watchPosition</code></a>의 호출 예시는 다음과 같습니다.</p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="KMqBAn1DS6/KurrH/vHdjNSkzZhtyhlQiynfdeVbhqY=" data-language="js"><span class="token keyword">function</span> <span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">position</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">doSomething</span><span class="token punctuation">(</span>position<span class="token punctuation">.</span>coords<span class="token punctuation">.</span>latitude<span class="token punctuation">,</span> position<span class="token punctuation">.</span>coords<span class="token punctuation">.</span>longitude<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">error</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"죄송합니다. 위치 정보를 사용할 수 없습니다."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">enableHighAccuracy</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">maximumAge</span><span class="token operator">:</span> <span class="token number">30000</span><span class="token punctuation">,</span>
  <span class="token literal-property property">timeout</span><span class="token operator">:</span> <span class="token number">27000</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> watchID <span class="token operator">=</span> navigator<span class="token punctuation">.</span>geolocation<span class="token punctuation">.</span><span class="token function">watchPosition</span><span class="token punctuation">(</span>success<span class="token punctuation">,</span> error<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</div>
</div>
<h2 id="위치_표현">위치 표현</h2>
<div class="section-content">
<p>사용자의 위치는 <a href="../geolocationposition"><code>GeolocationPosition</code></a> 객체 인스턴스와, 그 안의 <a href="../geolocationcoordinates"><code>GeolocationCoordinates</code></a> 객체 인스턴스로 표현됩니다.</p> <p><code>GeolocationPosition</code>은 오직 두 가지, <code>GeolocationCoordinates</code> 인스턴스를 가진 <code>coords</code> 속성과, 위치 정보의 기록 시점을 타임스탬프(<a href="https://developer.mozilla.org/en-US/docs/Glossary/Unix_time" class="only-in-en-us">Unix 시간 <small>(en-US)</small></a>, 밀리초)로 나타내는 <code>timestamp</code> 속성만 갖습니다.</p> <p><code>GeolocationCoordinates</code> 인스턴스는 여러 속성을 갖지만, 그중 가장 많이 쓰게 될 두 가지는 지도 위에 위치를 표시할 때 필요한 <code>latitude</code>와 <code>longitude</code>입니다. 따라서 대부분의 <code>Geolocation</code> 성공 콜백은 아래와 같이 꽤 간단한 형태입니다.</p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="AttnZP7h21NgSpOVnyNFXpbNX9ThbJU7kM09qZ2NrFg=" data-language="js"><span class="token keyword">function</span> <span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">position</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> latitude  <span class="token operator">=</span> position<span class="token punctuation">.</span>coords<span class="token punctuation">.</span>latitude<span class="token punctuation">;</span>
  <span class="token keyword">const</span> longitude <span class="token operator">=</span> position<span class="token punctuation">.</span>coords<span class="token punctuation">.</span>longitude<span class="token punctuation">;</span>

  <span class="token comment">// 위도와 경도를 사용해 작업 수행</span>
<span class="token punctuation">}</span>
</pre>
</div> <p>그러나 <code>GeolocationCoordinates</code> 객체에서 고도, 속도, 장치의 방향, 위경도와 고도의 오차범위 등 다른 다양한 정보도 가져올 수 있습니다.</p>
</div>
<h2 id="오류_처리">오류 처리</h2>
<div class="section-content">
<p><code>getCurrentPosition()</code> 또는 <code>watchPosition()</code>에 오류 콜백을 제공한 경우, 콜백은 첫 번째 매개변수로 <a href="https://developer.mozilla.org/en-US/docs/Web/API/GeolocationPositionError" class="only-in-en-us"><code>GeolocationPositionError</code> <small>(en-US)</small></a> 객체를 받습니다. 해당 객체는 오류의 유형을 나타내는 <code>code</code> 속성과, 사람이 읽을 수 있는 형태로 오류 코드의 뜻을 설명한 <code>message</code> 속성을 갖습니다.</p> <p>다음 형태로 사용할 수 있습니다.</p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="nb0oD6LbX/pL72soMJoaSNqGDoBIps7wW6+/t2o+g/Q=" data-language="js"><span class="token keyword">function</span> <span class="token function">errorCallback</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">ERROR(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>error<span class="token punctuation">.</span>code<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">): </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>error<span class="token punctuation">.</span>message<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</pre>
</div>
</div>
<h2 id="예제">예제</h2>
<div class="section-content">
<p>다음 예제는 Geolocation API를 사용해 사용자의 위경도를 가져오는 데 성공하면, 사용자의 위치로 향하는 <code>openstreetmap.org</code> 링크를 생성하고 하이퍼링크에 지정합니다.</p> 
</div>
<h3 id="html">HTML</h3>
<div class="section-content"><div class="code-example">
<p class="example-header"><span class="language-name">html</span></p>
<pre data-signature="AyE5Ogq9BFff3GyYc2oT1ogORSZkK9ZR0l6bm98A0BA=" data-language="html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>find-me<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>내 위치 보기<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>status<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>map-link<span class="token punctuation">"</span></span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>_blank<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</pre>
</div></div>
<h3 id="javascript">JavaScript</h3>
<div class="section-content"><div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="8fRaCbQkzoAqGFhhjQi6HeKRsDC42hcAnEX5w6UCEj0=" data-language="js"><span class="token keyword">function</span> <span class="token function">geoFindMe</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> status <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#status"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> mapLink <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#map-link"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  mapLink<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
  mapLink<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">position</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> latitude <span class="token operator">=</span> position<span class="token punctuation">.</span>coords<span class="token punctuation">.</span>latitude<span class="token punctuation">;</span>
    <span class="token keyword">const</span> longitude <span class="token operator">=</span> position<span class="token punctuation">.</span>coords<span class="token punctuation">.</span>longitude<span class="token punctuation">;</span>

    status<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
    mapLink<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://www.openstreetmap.org/#map=18/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>latitude<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>longitude<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    mapLink<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">위도: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>latitude<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> °, 경도: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>longitude<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> °</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">error</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    status<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">"현재 위치를 가져올 수 없음"</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>navigator<span class="token punctuation">.</span>geolocation<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    status<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">"브라우저가 위치 정보를 지원하지 않음"</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    status<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">"위치 파악 중…"</span><span class="token punctuation">;</span>
    navigator<span class="token punctuation">.</span>geolocation<span class="token punctuation">.</span><span class="token function">getCurrentPosition</span><span class="token punctuation">(</span>success<span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#find-me"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> geoFindMe<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</div></div>
<h3 id="결과">결과</h3>
<div class="section-content"><div class="code-example" id="sect4">

<iframe class="sample-code-frame" title="예제 sample" id="frame_예제" width="350" height="150" src="https://live.mdnplay.dev/ko/docs/Web/API/Geolocation_API/Using_the_Geolocation_API/runner.html?id=%EC%98%88%EC%A0%9C" loading="lazy"></iframe>
</div></div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2023 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/ko/docs/Web/API/Geolocation_API/Using_the_Geolocation_API" class="_attribution-link">https://developer.mozilla.org/ko/docs/Web/API/Geolocation_API/Using_the_Geolocation_API</a>
  </p>
</div>
