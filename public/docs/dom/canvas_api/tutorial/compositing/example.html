<header><h1>도형 합성 예제</h1></header><div class="section-content">
<p>이 샘플 프로그램에서는 여러 가지 <a href="https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/globalCompositeOperation" class="only-in-en-us">도형 합성 방법 <small>(en-US)</small></a>을 보여줍니다. 출력은 다음과 같습니다:</p>
<div class="code-example" id="sect1">

<iframe class="sample-code-frame" title="도형 합성 예제 sample" id="frame_도형_합성_예제" width="100%" height="7250" src="https://live-samples.mdn.mozilla.net/ko/docs/Web/HTML/Canvas/Tutorial/Compositing/Example/_sample_.%EB%8F%84%ED%98%95_%ED%95%A9%EC%84%B1_%EC%98%88%EC%A0%9C.html?id=%EB%8F%84%ED%98%95_%ED%95%A9%EC%84%B1_%EC%98%88%EC%A0%9C&amp;url=%2Fko%2Fdocs%2FWeb%2FHTML%2FCanvas%2FTutorial%2FCompositing%2FExample" loading="lazy"></iframe>
</div>
</div>
<h2 id="도형_합성_예제">도형 합성 예제</h2>
<div class="section-content">
<p>다음 코드에서는 프로그램의 나머지 부분에서 사용할 전역 값을 설정합니다.</p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="I6FPtDCoUcBbf1wPauBk6WmN//AUhTAuhanj2W5WWvE=" data-language="js"><span class="token keyword">var</span> canvas1 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"canvas"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> canvas2 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"canvas"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> gco <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token string">'source-over'</span><span class="token punctuation">,</span><span class="token string">'source-in'</span><span class="token punctuation">,</span><span class="token string">'source-out'</span><span class="token punctuation">,</span><span class="token string">'source-atop'</span><span class="token punctuation">,</span>
            <span class="token string">'destination-over'</span><span class="token punctuation">,</span><span class="token string">'destination-in'</span><span class="token punctuation">,</span><span class="token string">'destination-out'</span><span class="token punctuation">,</span><span class="token string">'destination-atop'</span><span class="token punctuation">,</span>
            <span class="token string">'lighter'</span><span class="token punctuation">,</span> <span class="token string">'copy'</span><span class="token punctuation">,</span><span class="token string">'xor'</span><span class="token punctuation">,</span> <span class="token string">'multiply'</span><span class="token punctuation">,</span> <span class="token string">'screen'</span><span class="token punctuation">,</span> <span class="token string">'overlay'</span><span class="token punctuation">,</span> <span class="token string">'darken'</span><span class="token punctuation">,</span>
            <span class="token string">'lighten'</span><span class="token punctuation">,</span> <span class="token string">'color-dodge'</span><span class="token punctuation">,</span> <span class="token string">'color-burn'</span><span class="token punctuation">,</span> <span class="token string">'hard-light'</span><span class="token punctuation">,</span> <span class="token string">'soft-light'</span><span class="token punctuation">,</span>
            <span class="token string">'difference'</span><span class="token punctuation">,</span> <span class="token string">'exclusion'</span><span class="token punctuation">,</span> <span class="token string">'hue'</span><span class="token punctuation">,</span> <span class="token string">'saturation'</span><span class="token punctuation">,</span> <span class="token string">'color'</span><span class="token punctuation">,</span> <span class="token string">'luminosity'</span>
          <span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> gcoText <span class="token operator">=</span> <span class="token punctuation">[</span>
<span class="token string">'기본 설정으로, 새로운 도형이 원래 도형 위에 그려집니다.'</span><span class="token punctuation">,</span>
<span class="token string">'새로운 도형이 원래 도형과 겹치는 부분에만 그려지며, 나머지는 투명하게 설정됩니다.'</span><span class="token punctuation">,</span>
<span class="token string">'새로운 도형이 원래 도형과 겹치지 않는 부분에만 그려집니다.'</span><span class="token punctuation">,</span>
<span class="token string">'새로운 도형이 원래 도형과 겹치는 부분에만 그려집니다.'</span><span class="token punctuation">,</span>
<span class="token string">'새로운 도형이 원래 도형 아래에 그려집니다.'</span><span class="token punctuation">,</span>
<span class="token string">'원래 도형 중 새로운 도형과 겹치는 부분이 유지되며, 나머지는 투명하게 설정됩니다.'</span><span class="token punctuation">,</span>
<span class="token string">'원래 도형 중 새로운 도형과 겹치지 않는 부분이 유지됩니다.'</span><span class="token punctuation">,</span>
<span class="token string">'원래 도형 중 새로운 도형과 겹치는 부분만 유지됩니다. 새로운 도형은 원래 도형 아래에 그려집니다.'</span><span class="token punctuation">,</span>
<span class="token string">'두 도형이 겹치는 곳의 색상이 두 색상값을 합한 값으로 결정됩니다.'</span><span class="token punctuation">,</span>
<span class="token string">'새로운 도형만 그려집니다.'</span><span class="token punctuation">,</span>
<span class="token string">'두 도형이 겹치는 곳이 투명하게 변하며, 나머지는 평범하게 그려집니다.'</span><span class="token punctuation">,</span>
<span class="token string">'위쪽 레이어의 픽셀값이 아래쪽 레이어의 해당하는 픽셀값과 곱해지며, 결과적으로 어두운 이미지가 생성됩니다.'</span><span class="token punctuation">,</span>
<span class="token string">'픽셀값을 뒤집고 곱한 다음 도로 뒤집습니다. 결과적으로 밝은 이미지가 생성됩니다(multiply의 반대).'</span><span class="token punctuation">,</span>
<span class="token string">'multiply와 screen의 조합입니다. 아래쪽 레이어의 어두운 부분은 더 어두워지고, 밝은 부분은 더 밝아집니다.'</span><span class="token punctuation">,</span>
<span class="token string">'두 레이어 중 어두운 픽셀값을 취합니다.'</span><span class="token punctuation">,</span>
<span class="token string">'두 레이어 중 밝은 픽셀값을 취합니다.'</span><span class="token punctuation">,</span>
<span class="token string">'아래쪽 레이어의 픽셀값을 위쪽 레이어의 뒤집힌 픽셀값으로 나눕니다.'</span><span class="token punctuation">,</span>
<span class="token string">'아래쪽 레이어의 뒤집힌 픽셀값을 위쪽 레이어의 픽셀값으로 나누고, 그 값을 도로 뒤집습니다.'</span><span class="token punctuation">,</span>
<span class="token string">'overlay와 같이 multiply와 screen의 조합이지만, 위아래 레이어의 순서가 바뀐 상태입니다.'</span><span class="token punctuation">,</span>
<span class="token string">'조금 더 부드러운 hard-light입니다. 완전한 검은색/흰색에서 무조건 완전한 검은색/흰색이 나오지 않습니다.'</span><span class="token punctuation">,</span>
<span class="token string">'한쪽 레이어의 픽셀값에서 다른 쪽 레이어의 픽셀값을 뺍니다. 빼는 순서는 결과값이 양수가 나오는 순서입니다.'</span><span class="token punctuation">,</span>
<span class="token string">'difference와 비슷하지만 대비가 덜합니다.'</span><span class="token punctuation">,</span>
<span class="token string">'아래쪽 레이어의 채도(chroma)와 명도(luma)를 보존하고 위쪽 레이어의 색상(hue)을 적용합니다.'</span><span class="token punctuation">,</span>
<span class="token string">'아래쪽 레이어의 색상과 명도를 보존하고 위쪽 레이어의 채도를 적용합니다.'</span><span class="token punctuation">,</span>
<span class="token string">'아래쪽 레이어의 명도를 보존하고 위쪽 레이어의 색상과 채도를 적용합니다.'</span><span class="token punctuation">,</span>
<span class="token string">'아래쪽 레이어의 색상과 채도를 보존하고 위쪽 레이어의 명도를 적용합니다.'</span>
          <span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> width <span class="token operator">=</span> <span class="token number">320</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> height <span class="token operator">=</span> <span class="token number">340</span><span class="token punctuation">;</span>
</pre>
</div>
</div>
<h3 id="메인_프로그램">메인 프로그램</h3>
<div class="section-content">
<p>페이지를 불러오고 나면 다음 코드에서 예제를 준비하고 실행합니다:</p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="dOeaSLe8M3I6FQmtM01KuXY1vjfebb0MLa5s9L9mm/A=" data-language="js">window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// lum in sRGB</span>
    <span class="token keyword">var</span> lum <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">r</span><span class="token operator">:</span> <span class="token number">0.33</span><span class="token punctuation">,</span>
        <span class="token literal-property property">g</span><span class="token operator">:</span> <span class="token number">0.33</span><span class="token punctuation">,</span>
        <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">0.33</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">// 캔버스 크기 변경</span>
    canvas1<span class="token punctuation">.</span>width <span class="token operator">=</span> width<span class="token punctuation">;</span>
    canvas1<span class="token punctuation">.</span>height <span class="token operator">=</span> height<span class="token punctuation">;</span>
    canvas2<span class="token punctuation">.</span>width <span class="token operator">=</span> width<span class="token punctuation">;</span>
    canvas2<span class="token punctuation">.</span>height <span class="token operator">=</span> height<span class="token punctuation">;</span>
    <span class="token function">lightMix</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">colorSphere</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">runComposite</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</pre>
</div> <p>또한 다음 코드의 <code>runComposite()</code>가 여러 가지 작업을 처리하며, 어려운 부분은 보조 함수를 사용합니다.</p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="0kTo7LWCu09MAhWj9VWN+QzoJqAO3rw3crmkV196H5g=" data-language="js"><span class="token keyword">function</span> <span class="token function">createCanvas</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"canvas"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    canvas<span class="token punctuation">.</span>style<span class="token punctuation">.</span>background <span class="token operator">=</span> <span class="token string">"url("</span><span class="token operator">+</span>op_8x8<span class="token punctuation">.</span>data<span class="token operator">+</span><span class="token string">")"</span><span class="token punctuation">;</span>
    canvas<span class="token punctuation">.</span>style<span class="token punctuation">.</span>border <span class="token operator">=</span> <span class="token string">"1px solid #000"</span><span class="token punctuation">;</span>
    canvas<span class="token punctuation">.</span>style<span class="token punctuation">.</span>margin <span class="token operator">=</span> <span class="token string">"5px"</span><span class="token punctuation">;</span>
    canvas<span class="token punctuation">.</span>width <span class="token operator">=</span> width<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>
    canvas<span class="token punctuation">.</span>height <span class="token operator">=</span> height<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> canvas<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">runComposite</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> dl <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"dl"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>dl<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>gco<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> pop <span class="token operator">=</span> gco<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> dt <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"dt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dt<span class="token punctuation">.</span>textContent <span class="token operator">=</span> pop<span class="token punctuation">;</span>
        dl<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>dt<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> dd <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"dd"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> p <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"p"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        p<span class="token punctuation">.</span>textContent <span class="token operator">=</span> gcoText<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        dd<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">var</span> canvasToDrawOn <span class="token operator">=</span> <span class="token function">createCanvas</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> canvasToDrawFrom <span class="token operator">=</span> <span class="token function">createCanvas</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> canvasToDrawResult <span class="token operator">=</span> <span class="token function">createCanvas</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">var</span> ctx <span class="token operator">=</span> canvasToDrawResult<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">clearRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">)</span>
        ctx<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>canvas1<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> width<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span> height<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span>globalCompositeOperation <span class="token operator">=</span> pop<span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>canvas2<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> width<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span> height<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span>globalCompositeOperation <span class="token operator">=</span> <span class="token string">"source-over"</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">"rgba(0,0,0,0.8)"</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> height<span class="token operator">/</span><span class="token number">2</span> <span class="token operator">-</span> <span class="token number">20</span><span class="token punctuation">,</span> width<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">"#FFF"</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span>font <span class="token operator">=</span> <span class="token string">"14px arial"</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">fillText</span><span class="token punctuation">(</span>pop<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> height<span class="token operator">/</span><span class="token number">2</span> <span class="token operator">-</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">var</span> ctx <span class="token operator">=</span> canvasToDrawOn<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">clearRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">)</span>
        ctx<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>canvas1<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> width<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span> height<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">"rgba(0,0,0,0.8)"</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> height<span class="token operator">/</span><span class="token number">2</span> <span class="token operator">-</span> <span class="token number">20</span><span class="token punctuation">,</span> width<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">"#FFF"</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span>font <span class="token operator">=</span> <span class="token string">"14px arial"</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">fillText</span><span class="token punctuation">(</span><span class="token string">'기존 도형'</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> height<span class="token operator">/</span><span class="token number">2</span> <span class="token operator">-</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">var</span> ctx <span class="token operator">=</span> canvasToDrawFrom<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">clearRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">)</span>
        ctx<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>canvas2<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> width<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span> height<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">"rgba(0,0,0,0.8)"</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> height<span class="token operator">/</span><span class="token number">2</span> <span class="token operator">-</span> <span class="token number">20</span><span class="token punctuation">,</span> width<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">"#FFF"</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span>font <span class="token operator">=</span> <span class="token string">"14px arial"</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">fillText</span><span class="token punctuation">(</span><span class="token string">'새로운 도형'</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> height<span class="token operator">/</span><span class="token number">2</span> <span class="token operator">-</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        dd<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>canvasToDrawOn<span class="token punctuation">)</span><span class="token punctuation">;</span>
        dd<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>canvasToDrawFrom<span class="token punctuation">)</span><span class="token punctuation">;</span>
        dd<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>canvasToDrawResult<span class="token punctuation">)</span><span class="token punctuation">;</span>

        dl<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>dd<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</pre>
</div>
</div>
<h3 id="보조_함수">보조 함수</h3>
<div class="section-content">
<p>이 프로그램에서는 몇몇 보조 함수를 사용합니다.</p> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="ofkWQNEzeGO3tP/A2TYcCwrEXVPsKhXjBa8IMtbNOto=" data-language="js"><span class="token keyword">var</span> <span class="token function-variable function">lightMix</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> ctx <span class="token operator">=</span> canvas2<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">"2d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span>globalCompositeOperation <span class="token operator">=</span> <span class="token string">"lighter"</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">"rgba(255,0,0,1)"</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">"rgba(0,0,255,1)"</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token number">220</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">"rgba(0,255,0,1)"</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token number">160</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">"#f00"</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">)</span>
    ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</pre>
</div> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="nMJkO4I/OHiDb0yz7Rr0lStt9TpPSGSiVJj6RmvA/Es=" data-language="js"><span class="token keyword">var</span> <span class="token function-variable function">colorSphere</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> ctx <span class="token operator">=</span> canvas1<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">"2d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> width <span class="token operator">=</span> <span class="token number">360</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> halfWidth <span class="token operator">=</span> width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> rotate <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">/</span> <span class="token number">360</span><span class="token punctuation">)</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// per degree</span>
    <span class="token keyword">var</span> offset <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// scrollbar offset</span>
    <span class="token keyword">var</span> oleft <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> otop <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> n <span class="token operator">&lt;=</span> <span class="token number">359</span><span class="token punctuation">;</span> n <span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> gradient <span class="token operator">=</span> ctx<span class="token punctuation">.</span><span class="token function">createLinearGradient</span><span class="token punctuation">(</span>oleft <span class="token operator">+</span> halfWidth<span class="token punctuation">,</span> otop<span class="token punctuation">,</span> oleft <span class="token operator">+</span> halfWidth<span class="token punctuation">,</span> otop <span class="token operator">+</span> halfWidth<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> color <span class="token operator">=</span> Color<span class="token punctuation">.</span><span class="token constant">HSV_RGB</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token constant">H</span><span class="token operator">:</span> <span class="token punctuation">(</span>n <span class="token operator">+</span> <span class="token number">300</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">360</span><span class="token punctuation">,</span> <span class="token constant">S</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token constant">V</span><span class="token operator">:</span> <span class="token number">100</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gradient<span class="token punctuation">.</span><span class="token function">addColorStop</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">"rgba(0,0,0,0)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gradient<span class="token punctuation">.</span><span class="token function">addColorStop</span><span class="token punctuation">(</span><span class="token number">0.7</span><span class="token punctuation">,</span> <span class="token string">"rgba("</span><span class="token operator">+</span>color<span class="token punctuation">.</span><span class="token constant">R</span><span class="token operator">+</span><span class="token string">","</span><span class="token operator">+</span>color<span class="token punctuation">.</span><span class="token constant">G</span><span class="token operator">+</span><span class="token string">","</span><span class="token operator">+</span>color<span class="token punctuation">.</span><span class="token constant">B</span><span class="token operator">+</span><span class="token string">",1)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gradient<span class="token punctuation">.</span><span class="token function">addColorStop</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"rgba(255,255,255,1)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span>oleft <span class="token operator">+</span> halfWidth<span class="token punctuation">,</span> otop<span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>oleft <span class="token operator">+</span> halfWidth<span class="token punctuation">,</span> otop <span class="token operator">+</span> halfWidth<span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>oleft <span class="token operator">+</span> halfWidth <span class="token operator">+</span> <span class="token number">6</span><span class="token punctuation">,</span> otop<span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> gradient<span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span>oleft <span class="token operator">+</span> halfWidth<span class="token punctuation">,</span> otop <span class="token operator">+</span> halfWidth<span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">rotate</span><span class="token punctuation">(</span>rotate<span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token punctuation">(</span>oleft <span class="token operator">+</span> halfWidth<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token punctuation">(</span>otop <span class="token operator">+</span> halfWidth<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">"#00f"</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">)</span>
    ctx<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> ctx<span class="token punctuation">.</span>canvas<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</pre>
</div> <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre data-signature="r/tz+r6ksTmp6MWrNsr1RvUlVd1BSYu7/6YFdg32t4Q=" data-language="js"><span class="token comment">// HSV (1978) = H: Hue / S: Saturation / V: Value</span>
Color <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
Color<span class="token punctuation">.</span><span class="token function-variable function">HSV_RGB</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">o</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> <span class="token constant">H</span> <span class="token operator">=</span> o<span class="token punctuation">.</span><span class="token constant">H</span> <span class="token operator">/</span> <span class="token number">360</span><span class="token punctuation">,</span>
        <span class="token constant">S</span> <span class="token operator">=</span> o<span class="token punctuation">.</span><span class="token constant">S</span> <span class="token operator">/</span> <span class="token number">100</span><span class="token punctuation">,</span>
        <span class="token constant">V</span> <span class="token operator">=</span> o<span class="token punctuation">.</span><span class="token constant">V</span> <span class="token operator">/</span> <span class="token number">100</span><span class="token punctuation">,</span>
        <span class="token constant">R</span><span class="token punctuation">,</span> <span class="token constant">G</span><span class="token punctuation">,</span> <span class="token constant">B</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> <span class="token constant">A</span><span class="token punctuation">,</span> <span class="token constant">B</span><span class="token punctuation">,</span> <span class="token constant">C</span><span class="token punctuation">,</span> <span class="token constant">D</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">S</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token constant">R</span> <span class="token operator">=</span> <span class="token constant">G</span> <span class="token operator">=</span> <span class="token constant">B</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token constant">V</span> <span class="token operator">*</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">H</span> <span class="token operator">&gt;=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token constant">H</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token constant">H</span> <span class="token operator">=</span> <span class="token number">6</span> <span class="token operator">*</span> <span class="token constant">H</span><span class="token punctuation">;</span>
        <span class="token constant">D</span> <span class="token operator">=</span> <span class="token constant">H</span> <span class="token operator">-</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token constant">H</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token constant">A</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token number">255</span> <span class="token operator">*</span> <span class="token constant">V</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> <span class="token constant">S</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token constant">B</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token number">255</span> <span class="token operator">*</span> <span class="token constant">V</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token constant">S</span> <span class="token operator">*</span> <span class="token constant">D</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token constant">C</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token number">255</span> <span class="token operator">*</span> <span class="token constant">V</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token constant">S</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> <span class="token constant">D</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token constant">V</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token number">255</span> <span class="token operator">*</span> <span class="token constant">V</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">switch</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token constant">H</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> <span class="token number">0</span><span class="token operator">:</span>
                <span class="token constant">R</span> <span class="token operator">=</span> <span class="token constant">V</span><span class="token punctuation">;</span>
                <span class="token constant">G</span> <span class="token operator">=</span> <span class="token constant">C</span><span class="token punctuation">;</span>
                <span class="token constant">B</span> <span class="token operator">=</span> <span class="token constant">A</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span>
                <span class="token constant">R</span> <span class="token operator">=</span> <span class="token constant">B</span><span class="token punctuation">;</span>
                <span class="token constant">G</span> <span class="token operator">=</span> <span class="token constant">V</span><span class="token punctuation">;</span>
                <span class="token constant">B</span> <span class="token operator">=</span> <span class="token constant">A</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">2</span><span class="token operator">:</span>
                <span class="token constant">R</span> <span class="token operator">=</span> <span class="token constant">A</span><span class="token punctuation">;</span>
                <span class="token constant">G</span> <span class="token operator">=</span> <span class="token constant">V</span><span class="token punctuation">;</span>
                <span class="token constant">B</span> <span class="token operator">=</span> <span class="token constant">C</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">3</span><span class="token operator">:</span>
                <span class="token constant">R</span> <span class="token operator">=</span> <span class="token constant">A</span><span class="token punctuation">;</span>
                <span class="token constant">G</span> <span class="token operator">=</span> <span class="token constant">B</span><span class="token punctuation">;</span>
                <span class="token constant">B</span> <span class="token operator">=</span> <span class="token constant">V</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">4</span><span class="token operator">:</span>
                <span class="token constant">R</span> <span class="token operator">=</span> <span class="token constant">C</span><span class="token punctuation">;</span>
                <span class="token constant">G</span> <span class="token operator">=</span> <span class="token constant">A</span><span class="token punctuation">;</span>
                <span class="token constant">B</span> <span class="token operator">=</span> <span class="token constant">V</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token number">5</span><span class="token operator">:</span>
                <span class="token constant">R</span> <span class="token operator">=</span> <span class="token constant">V</span><span class="token punctuation">;</span>
                <span class="token constant">G</span> <span class="token operator">=</span> <span class="token constant">A</span><span class="token punctuation">;</span>
                <span class="token constant">B</span> <span class="token operator">=</span> <span class="token constant">B</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token constant">R</span><span class="token operator">:</span> <span class="token constant">R</span><span class="token punctuation">,</span>
        <span class="token constant">G</span><span class="token operator">:</span> <span class="token constant">G</span><span class="token punctuation">,</span>
        <span class="token constant">B</span><span class="token operator">:</span> <span class="token constant">B</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> <span class="token function-variable function">createInterlace</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">size<span class="token punctuation">,</span> color1<span class="token punctuation">,</span> color2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> proto <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"canvas"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">"2d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    proto<span class="token punctuation">.</span>canvas<span class="token punctuation">.</span>width <span class="token operator">=</span> size <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
    proto<span class="token punctuation">.</span>canvas<span class="token punctuation">.</span>height <span class="token operator">=</span> size <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
    proto<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> color1<span class="token punctuation">;</span> <span class="token comment">// top-left</span>
    proto<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> size<span class="token punctuation">,</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>
    proto<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> color2<span class="token punctuation">;</span> <span class="token comment">// top-right</span>
    proto<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span>size<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> size<span class="token punctuation">,</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>
    proto<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> color2<span class="token punctuation">;</span> <span class="token comment">// bottom-left</span>
    proto<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> size<span class="token punctuation">,</span> size<span class="token punctuation">,</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>
    proto<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> color1<span class="token punctuation">;</span> <span class="token comment">// bottom-right</span>
    proto<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span>size<span class="token punctuation">,</span> size<span class="token punctuation">,</span> size<span class="token punctuation">,</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> pattern <span class="token operator">=</span> proto<span class="token punctuation">.</span><span class="token function">createPattern</span><span class="token punctuation">(</span>proto<span class="token punctuation">.</span>canvas<span class="token punctuation">,</span> <span class="token string">"repeat"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pattern<span class="token punctuation">.</span>data <span class="token operator">=</span> proto<span class="token punctuation">.</span>canvas<span class="token punctuation">.</span><span class="token function">toDataURL</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> pattern<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> op_8x8 <span class="token operator">=</span> <span class="token function">createInterlace</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token string">"#FFF"</span><span class="token punctuation">,</span> <span class="token string">"#eee"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre>
</div>
</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2023 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/ko/docs/Web/API/Canvas_API/Tutorial/Compositing/Example" class="_attribution-link">https://developer.mozilla.org/ko/docs/Web/API/Canvas_API/Tutorial/Compositing/Example</a>
  </p>
</div>
