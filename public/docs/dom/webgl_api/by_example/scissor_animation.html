<header><h1>애니메이션 잘라내기</h1></header><div class="section-content">
<ul class="prev-next"> <li><a class="button secondary only-in-en-us" href="https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/By_example/Boilerplate_1">« 이전 <small>(en-US)</small></a></li> <li><a class="button secondary only-in-en-us" href="https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/By_example/Raining_rectangles">다음 » <small>(en-US)</small></a></li> </ul> <p>활동을 청소하고 잘라내는 어떤 애니메이션 장난</p>
<div class="code-example" id="sect1">

<iframe class="sample-code-frame" title="애니메이션 잘라내기 sample" id="frame_애니메이션_잘라내기" width="660" height="425" src="https://live.mdnplay.dev/ko/docs/Web/API/WebGL_API/By_example/Scissor_animation/runner.html?id=%EC%95%A0%EB%8B%88%EB%A9%94%EC%9D%B4%EC%85%98_%EC%9E%98%EB%9D%BC%EB%82%B4%EA%B8%B0" loading="lazy"></iframe>
</div>
</div>
<h3 id="애니메이션_잘라내기">애니메이션 잘라내기</h3>
<div class="section-content">
<p>이번 예시에서는, 우리는 사각형을 <a class="only-in-en-us" href="https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/scissor"><code>scissor()</code> <small>(en-US)</small></a> 와<a class="only-in-en-us" href="https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/clear"><code>clear()</code> <small>(en-US)</small></a> 을 이용하여 그려볼 것입니다. 우리는 다시 애니메이션 루프를 타이머를 이용하여 구축할 것입니다. 이번에는 매 프레임(우리는 프레임 비율을 대강 매 17ms 마다 설정했습니다.) 대마다 업데이트 되는 사각형(잘라내는 영역)의 경우임을 주목하세요.</p> <p>반대로, 사각형의 색 (<a class="only-in-en-us" href="https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/clearColor"><code>clearColor</code> <small>(en-US)</small></a>으로 설정되는)은 오직 새로운 사각형이 생성될 때만 업데이트 됩니다. 이것은 상태 머신으로써 <a href="https://developer.mozilla.org/ko/docs/Glossary/WebGL">WebGL</a> 을 보여줄 좋은 데모입니다. 각 사각형에 대하여 우리는 그것의 색을 결정하고, 매 프레임마다 위치를 결정합니다. WebGl의 깨끗한 색 상태는 새로운 사각형이 생성되어 우리가 그것을 다시 바꿀 때까지 설정 값으로 남아있습니다.</p>     <div class="code-example">
<p class="example-header"><span class="language-name">js</span></p>
<pre id="livesample-js" data-signature="/VXJm3XGm7OCjgFnUBhrIEAmK249DiOwWwXjvtKnSMo=" data-language="js"><span class="token string">"use strict"</span>
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"load"</span><span class="token punctuation">,</span> setupAnimation<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Variables to hold the WebGL context, and the color and</span>
<span class="token comment">// position of animated squares.</span>
<span class="token keyword">var</span> gl<span class="token punctuation">,</span>
  color <span class="token operator">=</span> <span class="token function">getRandomColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  position<span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">setupAnimation</span> <span class="token punctuation">(</span><span class="token parameter">evt</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  window<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span>evt<span class="token punctuation">.</span>type<span class="token punctuation">,</span> setupAnimation<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>gl <span class="token operator">=</span> <span class="token function">getRenderingContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>

  gl<span class="token punctuation">.</span><span class="token function">enable</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">SCISSOR_TEST</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  gl<span class="token punctuation">.</span><span class="token function">clearColor</span><span class="token punctuation">(</span>color<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> color<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> color<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Unlike the browser window, vertical position in WebGL is</span>
  <span class="token comment">// measured from bottom to top. In here we set the initial</span>
  <span class="token comment">// position of the square to be at the top left corner of the</span>
  <span class="token comment">// drawing buffer.</span>
  position <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> gl<span class="token punctuation">.</span>drawingBufferHeight<span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token keyword">var</span> button <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"button"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> timer<span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">startAnimation</span><span class="token punctuation">(</span><span class="token parameter">evt</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    button<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span>evt<span class="token punctuation">.</span>type<span class="token punctuation">,</span> startAnimation<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    button<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> stopAnimation<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"strong"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">"stop"</span><span class="token punctuation">;</span>
    timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span>drawAnimation<span class="token punctuation">,</span> <span class="token number">17</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">drawAnimation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">stopAnimation</span><span class="token punctuation">(</span><span class="token parameter">evt</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    button<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span>evt<span class="token punctuation">.</span>type<span class="token punctuation">,</span> stopAnimation<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    button<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> startAnimation<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"strong"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">"start"</span><span class="token punctuation">;</span>
    <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">stopAnimation</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"click"</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Variables to hold the size and velocity of the square.</span>
<span class="token keyword">var</span> size <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  velocity <span class="token operator">=</span> <span class="token number">3.0</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">drawAnimation</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  gl<span class="token punctuation">.</span><span class="token function">scissor</span><span class="token punctuation">(</span>position<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> position<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> size<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">,</span> size<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  gl<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span><span class="token constant">COLOR_BUFFER_BIT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Every frame the vertical position of the square is</span>
  <span class="token comment">// decreased, to create the illusion of movement.</span>
  position<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-=</span> velocity<span class="token punctuation">;</span>
  <span class="token comment">// When the sqaure hits the bottom of the drawing buffer,</span>
  <span class="token comment">// we override it with new square of different color and</span>
  <span class="token comment">// velocity.</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>position<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Horizontal position chosen randomly, and vertical</span>
    <span class="token comment">// position at the top of the drawing buffer.</span>
    position <span class="token operator">=</span> <span class="token punctuation">[</span>
      Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>gl<span class="token punctuation">.</span>drawingBufferWidth <span class="token operator">-</span> size<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      gl<span class="token punctuation">.</span>drawingBufferHeight
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// Random velocity between 1.0 and 7.0</span>
    velocity <span class="token operator">=</span> <span class="token number">1.0</span> <span class="token operator">+</span> <span class="token number">6.0</span><span class="token operator">*</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    color <span class="token operator">=</span> <span class="token function">getRandomColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    gl<span class="token punctuation">.</span><span class="token function">clearColor</span><span class="token punctuation">(</span>color<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> color<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> color<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">getRandomColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre>
</div>   <p>이 예시 코드는 <a href="https://github.com/idofilin/webgl-by-example/tree/master/scissor-animation" target="_blank">GitHub</a>에서도 확인 가능합니다.</p>
<ul class="prev-next"> <li><a class="button secondary only-in-en-us" href="https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/By_example/Boilerplate_1">« 이전 <small>(en-US)</small></a></li> <li><a class="button secondary only-in-en-us" href="https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/By_example/Raining_rectangles">다음 » <small>(en-US)</small></a></li> </ul>
</div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2005&ndash;2023 MDN contributors.<br>Licensed under the Creative Commons Attribution-ShareAlike License v2.5 or later.<br>
    <a href="https://developer.mozilla.org/ko/docs/Web/API/WebGL_API/By_example/Scissor_animation" class="_attribution-link">https://developer.mozilla.org/ko/docs/Web/API/WebGL_API/By_example/Scissor_animation</a>
  </p>
</div>
